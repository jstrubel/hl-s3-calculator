<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Hyperliquid S3 Airdrop Estimator</title>
    <meta name="description" content="Independent model for estimating potential Hyperliquid Season 3 airdrop allocations based on trading activity.">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=JetBrains+Mono:wght@400;500;600;700&family=Space+Grotesk:wght@400;500;600;700&display=swap" rel="stylesheet">
    <style>
        :root {
            --bg-primary: #0a0e14;
            --bg-secondary: #111820;
            --bg-tertiary: #1a2332;
            --bg-card: #151d2a;
            --border-color: #2a3a4d;
            --border-active: #3d5a80;
            --text-primary: #e8edf5;
            --text-secondary: #8b9bb4;
            --text-muted: #5a6a7d;
            --accent-green: #00d992;
            --accent-green-dim: rgba(0, 217, 146, 0.15);
            --accent-green-medium: rgba(0, 217, 146, 0.3);
            --accent-red: #ff4757;
            --accent-blue: #4da3ff;
            --accent-purple: #a855f7;
            --accent-yellow: #fbbf24;
            --accent-orange: #f97316;
            --glow-green: 0 0 30px rgba(0, 217, 146, 0.3);
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Space Grotesk', sans-serif;
            background: var(--bg-primary);
            color: var(--text-primary);
            min-height: 100vh;
            line-height: 1.6;
        }

        body::before {
            content: '';
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background-image: 
                linear-gradient(rgba(0, 217, 146, 0.02) 1px, transparent 1px),
                linear-gradient(90deg, rgba(0, 217, 146, 0.02) 1px, transparent 1px);
            background-size: 60px 60px;
            pointer-events: none;
            z-index: -1;
        }

        .container {
            max-width: 1300px;
            margin: 0 auto;
            padding: 1.5rem;
        }

        /* New Code Alert Banner */
        .code-alert {
            background: linear-gradient(135deg, rgba(0, 217, 146, 0.15), rgba(77, 163, 255, 0.1));
            border: 1px solid var(--accent-green);
            border-radius: 10px;
            padding: 1rem 1.25rem;
            margin-bottom: 1rem;
            display: flex;
            align-items: flex-start;
            gap: 0.75rem;
        }

        .code-alert-icon {
            font-size: 1.5rem;
            line-height: 1;
        }

        .code-alert-content {
            flex: 1;
        }

        .code-alert-title {
            font-weight: 600;
            color: var(--accent-green);
            margin-bottom: 0.25rem;
        }

        .code-alert-text {
            font-size: 0.85rem;
            color: var(--text-secondary);
        }

        .code-alert-tag {
            background: var(--accent-green);
            color: var(--bg-primary);
            font-size: 0.7rem;
            font-weight: 600;
            padding: 0.2rem 0.5rem;
            border-radius: 4px;
            margin-left: 0.5rem;
        }

        /* Referral Banner */
        .referral-banner {
            background: linear-gradient(135deg, var(--bg-tertiary), var(--bg-card));
            border: 1px solid var(--accent-green);
            border-radius: 10px;
            padding: 0.75rem 1.25rem;
            margin-bottom: 1rem;
            display: flex;
            align-items: center;
            justify-content: space-between;
            flex-wrap: wrap;
            gap: 0.75rem;
        }

        .referral-text {
            display: flex;
            align-items: center;
            gap: 0.5rem;
            font-size: 0.9rem;
        }

        .referral-highlight {
            color: var(--accent-green);
            font-weight: 600;
        }

        .referral-btn {
            background: var(--accent-green);
            color: var(--bg-primary);
            border: none;
            border-radius: 6px;
            padding: 0.5rem 1rem;
            font-family: 'Space Grotesk', sans-serif;
            font-size: 0.85rem;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.2s;
            text-decoration: none;
            display: inline-flex;
            align-items: center;
            gap: 0.4rem;
        }

        .referral-btn:hover {
            transform: translateY(-1px);
            box-shadow: 0 4px 12px rgba(0, 217, 146, 0.3);
        }

        /* Navigation Tabs */
        .nav-tabs {
            display: flex;
            gap: 0.5rem;
            margin-bottom: 1.5rem;
            border-bottom: 1px solid var(--border-color);
            padding-bottom: 1rem;
        }

        .nav-tab {
            background: var(--bg-tertiary);
            border: 1px solid var(--border-color);
            border-radius: 8px;
            padding: 0.6rem 1.25rem;
            font-family: 'Space Grotesk', sans-serif;
            font-size: 0.9rem;
            font-weight: 500;
            color: var(--text-secondary);
            cursor: pointer;
            transition: all 0.2s;
            display: flex;
            align-items: center;
            gap: 0.4rem;
        }

        .nav-tab:hover {
            border-color: var(--accent-green);
            color: var(--text-primary);
        }

        .nav-tab.active {
            background: var(--accent-green-dim);
            border-color: var(--accent-green);
            color: var(--accent-green);
        }

        .tab-content {
            display: none;
        }

        .tab-content.active {
            display: block;
        }

        /* Header */
        header {
            text-align: center;
            padding: 2rem 0 1.5rem;
            border-bottom: 1px solid var(--border-color);
            margin-bottom: 1.5rem;
        }

        .logo {
            display: inline-flex;
            align-items: center;
            gap: 0.75rem;
            margin-bottom: 0.75rem;
        }

        .logo-icon {
            width: 44px;
            height: 44px;
            background: linear-gradient(135deg, var(--accent-green), #00b37a);
            border-radius: 10px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: 700;
            font-size: 1.25rem;
            box-shadow: var(--glow-green);
        }

        h1 {
            font-size: 2rem;
            font-weight: 700;
            letter-spacing: -0.02em;
            background: linear-gradient(135deg, var(--text-primary), var(--accent-green));
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
        }

        .subtitle {
            color: var(--text-secondary);
            font-size: 1rem;
            margin-top: 0.35rem;
        }

        .disclaimer-banner {
            background: rgba(255, 71, 87, 0.1);
            border: 1px solid rgba(255, 71, 87, 0.3);
            border-radius: 8px;
            padding: 0.6rem 1rem;
            margin-top: 1rem;
            font-size: 0.8rem;
            color: var(--accent-red);
            display: inline-block;
        }

        /* Main Layout */
        .main-grid {
            display: grid;
            grid-template-columns: 1fr 380px;
            gap: 1.5rem;
        }

        @media (max-width: 1000px) {
            .main-grid {
                grid-template-columns: 1fr;
            }
        }

        /* Cards */
        .card {
            background: var(--bg-card);
            border: 1px solid var(--border-color);
            border-radius: 14px;
            padding: 1.25rem;
        }

        .card-title {
            font-size: 1rem;
            font-weight: 600;
            color: var(--text-primary);
            margin-bottom: 1rem;
            display: flex;
            align-items: center;
            gap: 0.5rem;
        }

        /* S3 Structure Selector */
        .structure-selector {
            background: var(--bg-tertiary);
            border: 1px solid var(--border-color);
            border-radius: 10px;
            padding: 1rem;
            margin-bottom: 1rem;
        }

        .structure-title {
            font-size: 0.85rem;
            font-weight: 600;
            color: var(--text-primary);
            margin-bottom: 0.75rem;
            display: flex;
            align-items: center;
            gap: 0.5rem;
        }

        .structure-options {
            display: grid;
            grid-template-columns: repeat(3, 1fr);
            gap: 0.5rem;
        }

        @media (max-width: 600px) {
            .structure-options {
                grid-template-columns: 1fr;
            }
        }

        .structure-option {
            background: var(--bg-primary);
            border: 2px solid var(--border-color);
            border-radius: 8px;
            padding: 0.75rem;
            cursor: pointer;
            transition: all 0.2s;
            text-align: center;
        }

        .structure-option:hover {
            border-color: var(--border-active);
        }

        .structure-option.active {
            border-color: var(--accent-green);
            background: var(--accent-green-dim);
        }

        .structure-option-name {
            font-weight: 600;
            font-size: 0.85rem;
            margin-bottom: 0.25rem;
        }

        .structure-option-desc {
            font-size: 0.7rem;
            color: var(--text-muted);
            line-height: 1.3;
        }

        .structure-option-prob {
            font-size: 0.65rem;
            color: var(--accent-green);
            margin-top: 0.35rem;
            font-weight: 500;
        }

        /* Activity Input Grid */
        .activity-grid {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 1rem;
        }

        @media (max-width: 700px) {
            .activity-grid {
                grid-template-columns: 1fr;
            }
        }

        .activity-card {
            background: var(--bg-tertiary);
            border: 1px solid var(--border-color);
            border-radius: 10px;
            padding: 1rem;
            transition: all 0.2s;
        }

        .activity-card:hover {
            border-color: var(--border-active);
        }

        .activity-card.has-value {
            border-color: var(--accent-green);
            background: linear-gradient(135deg, var(--bg-tertiary), rgba(0, 217, 146, 0.05));
        }

        .activity-header {
            display: flex;
            align-items: center;
            gap: 0.6rem;
            margin-bottom: 0.75rem;
        }

        .activity-icon {
            width: 32px;
            height: 32px;
            border-radius: 8px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 1rem;
        }

        .activity-icon.unit { background: rgba(0, 217, 146, 0.2); }
        .activity-icon.native { background: rgba(168, 85, 247, 0.2); }
        .activity-icon.perps { background: rgba(77, 163, 255, 0.2); }
        .activity-icon.evm { background: rgba(249, 115, 22, 0.2); }

        .activity-name {
            font-weight: 600;
            font-size: 0.95rem;
        }

        .activity-desc {
            font-size: 0.75rem;
            color: var(--text-muted);
        }

        .activity-inputs {
            display: flex;
            flex-direction: column;
            gap: 0.6rem;
        }

        .input-row {
            display: flex;
            gap: 0.5rem;
            align-items: center;
        }

        .input-row label {
            font-size: 0.75rem;
            color: var(--text-secondary);
            min-width: 55px;
        }

        .input-wrapper {
            position: relative;
            flex: 1;
        }

        input[type="number"] {
            width: 100%;
            background: var(--bg-primary);
            border: 1px solid var(--border-color);
            border-radius: 6px;
            padding: 0.5rem 0.75rem;
            padding-right: 2.5rem;
            font-family: 'JetBrains Mono', monospace;
            font-size: 0.85rem;
            color: var(--text-primary);
            transition: all 0.2s;
        }

        input[type="number"]:focus {
            outline: none;
            border-color: var(--accent-green);
            box-shadow: 0 0 0 2px var(--accent-green-dim);
        }

        .input-suffix {
            position: absolute;
            right: 0.6rem;
            top: 50%;
            transform: translateY(-50%);
            color: var(--text-muted);
            font-family: 'JetBrains Mono', monospace;
            font-size: 0.7rem;
        }

        input[type="number"]::-webkit-inner-spin-button {
            opacity: 0;
        }

        /* Tier and Settings */
        .settings-row {
            display: flex;
            gap: 1rem;
            margin-top: 1rem;
            flex-wrap: wrap;
        }

        .setting-group {
            flex: 1;
            min-width: 200px;
        }

        .setting-label {
            font-size: 0.8rem;
            color: var(--text-secondary);
            margin-bottom: 0.5rem;
            display: block;
        }

        .toggle-group {
            display: flex;
            gap: 0.35rem;
            flex-wrap: wrap;
        }

        .toggle-btn {
            background: var(--bg-tertiary);
            border: 1px solid var(--border-color);
            border-radius: 6px;
            padding: 0.4rem 0.7rem;
            font-family: 'Space Grotesk', sans-serif;
            font-size: 0.75rem;
            color: var(--text-secondary);
            cursor: pointer;
            transition: all 0.2s;
        }

        .toggle-btn:hover {
            border-color: var(--accent-green);
            color: var(--text-primary);
        }

        .toggle-btn.active {
            background: var(--accent-green-dim);
            border-color: var(--accent-green);
            color: var(--accent-green);
        }

        .checkbox-row {
            display: flex;
            align-items: center;
            gap: 0.5rem;
            margin-top: 0.75rem;
        }

        .checkbox-row input[type="checkbox"] {
            accent-color: var(--accent-green);
            width: 16px;
            height: 16px;
        }

        .checkbox-row label {
            font-size: 0.8rem;
            color: var(--text-secondary);
        }

        .info-note {
            font-size: 0.75rem;
            color: var(--text-muted);
            margin-top: 0.4rem;
            font-style: italic;
        }

        /* Results Panel */
        .results-panel {
            position: sticky;
            top: 1.5rem;
        }

        .total-result {
            background: linear-gradient(135deg, var(--bg-tertiary), var(--bg-card));
            border: 1px solid var(--accent-green);
            border-radius: 12px;
            padding: 1.25rem;
            text-align: center;
            margin-bottom: 1rem;
            box-shadow: var(--glow-green);
        }

        .total-label {
            font-size: 0.8rem;
            color: var(--text-secondary);
            text-transform: uppercase;
            letter-spacing: 0.05em;
        }

        .total-value {
            font-family: 'JetBrains Mono', monospace;
            font-size: 2rem;
            font-weight: 700;
            color: var(--accent-green);
            margin: 0.25rem 0;
        }

        .total-hype {
            font-size: 0.9rem;
            color: var(--text-secondary);
        }

        /* Vesting Breakdown */
        .vesting-breakdown {
            display: flex;
            gap: 0.75rem;
            margin-top: 1rem;
            padding-top: 1rem;
            border-top: 1px solid var(--border-color);
        }

        .vesting-item {
            flex: 1;
            text-align: center;
            padding: 0.75rem;
            background: var(--bg-primary);
            border-radius: 8px;
        }

        .vesting-icon {
            font-size: 1.1rem;
            margin-bottom: 0.25rem;
        }

        .vesting-label {
            font-size: 0.7rem;
            color: var(--text-muted);
            margin-bottom: 0.25rem;
        }

        .vesting-value {
            font-family: 'JetBrains Mono', monospace;
            font-size: 0.95rem;
            font-weight: 600;
            color: var(--text-primary);
        }

        .vesting-hype {
            font-size: 0.7rem;
            color: var(--text-secondary);
        }

        /* Retro vs Ongoing Breakdown */
        .allocation-breakdown {
            background: var(--bg-tertiary);
            border-radius: 10px;
            padding: 1rem;
            margin-bottom: 1rem;
        }

        .allocation-title {
            font-size: 0.8rem;
            font-weight: 600;
            color: var(--text-primary);
            margin-bottom: 0.75rem;
        }

        .allocation-bar {
            height: 8px;
            background: var(--bg-primary);
            border-radius: 4px;
            overflow: hidden;
            display: flex;
            margin-bottom: 0.5rem;
        }

        .allocation-bar-retro {
            background: var(--accent-green);
            transition: width 0.3s;
        }

        .allocation-bar-ongoing {
            background: var(--accent-blue);
            transition: width 0.3s;
        }

        .allocation-legend {
            display: flex;
            justify-content: space-between;
            font-size: 0.7rem;
        }

        .allocation-legend-item {
            display: flex;
            align-items: center;
            gap: 0.35rem;
        }

        .allocation-dot {
            width: 8px;
            height: 8px;
            border-radius: 50%;
        }

        .allocation-dot.retro { background: var(--accent-green); }
        .allocation-dot.ongoing { background: var(--accent-blue); }

        /* Category Results */
        .category-results {
            margin-top: 1rem;
        }

        .category-title {
            font-size: 0.8rem;
            color: var(--text-secondary);
            margin-bottom: 0.5rem;
        }

        .category-item {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 0.5rem 0;
            border-bottom: 1px solid var(--border-color);
        }

        .category-item:last-child {
            border-bottom: none;
        }

        .category-name {
            font-size: 0.85rem;
            color: var(--text-secondary);
        }

        .category-value {
            font-family: 'JetBrains Mono', monospace;
            font-size: 0.85rem;
            color: var(--text-primary);
        }

        .category-value.zero {
            color: var(--text-muted);
        }

        /* Stats Grid */
        .stats-grid {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 0.5rem;
            margin-top: 1rem;
        }

        .stat-box {
            background: var(--bg-tertiary);
            border-radius: 8px;
            padding: 0.6rem;
            text-align: center;
        }

        .stat-label {
            font-size: 0.65rem;
            color: var(--text-muted);
            text-transform: uppercase;
        }

        .stat-value {
            font-family: 'JetBrains Mono', monospace;
            font-size: 0.9rem;
            font-weight: 600;
            color: var(--text-primary);
        }

        /* Scenarios Table */
        .scenarios-card {
            margin-top: 1rem;
        }

        .scenarios-table {
            width: 100%;
            border-collapse: collapse;
            font-size: 0.8rem;
        }

        .scenarios-table th {
            text-align: left;
            padding: 0.5rem;
            color: var(--text-muted);
            font-weight: 500;
            border-bottom: 1px solid var(--border-color);
        }

        .scenarios-table td {
            padding: 0.5rem;
            border-bottom: 1px solid var(--border-color);
        }

        .scenarios-table tr:last-child td {
            border-bottom: none;
        }

        .scenarios-table tr.highlight {
            background: var(--accent-green-dim);
        }

        .tag {
            font-size: 0.65rem;
            padding: 0.2rem 0.4rem;
            border-radius: 4px;
            font-weight: 600;
        }

        .tag.bear { background: rgba(255, 71, 87, 0.2); color: var(--accent-red); }
        .tag.base { background: var(--accent-green-dim); color: var(--accent-green); }
        .tag.bull { background: rgba(77, 163, 255, 0.2); color: var(--accent-blue); }

        /* Parameters Collapsible */
        .params-section {
            margin-top: 1rem;
        }

        .params-header {
            display: flex;
            align-items: center;
            justify-content: space-between;
            padding: 0.75rem;
            background: var(--bg-tertiary);
            border: 1px solid var(--border-color);
            border-radius: 8px;
            cursor: pointer;
            transition: all 0.2s;
        }

        .params-header:hover {
            border-color: var(--border-active);
        }

        .params-header-title {
            font-size: 0.85rem;
            font-weight: 500;
            display: flex;
            align-items: center;
            gap: 0.5rem;
        }

        .params-chevron {
            transition: transform 0.2s;
        }

        .params-header.open .params-chevron {
            transform: rotate(180deg);
        }

        .params-content {
            display: none;
            padding: 1rem;
            background: var(--bg-tertiary);
            border: 1px solid var(--border-color);
            border-top: none;
            border-radius: 0 0 8px 8px;
        }

        .params-content.open {
            display: block;
        }

        .param-row {
            margin-bottom: 1rem;
        }

        .param-row:last-child {
            margin-bottom: 0;
        }

        .param-label {
            display: flex;
            justify-content: space-between;
            font-size: 0.8rem;
            color: var(--text-secondary);
            margin-bottom: 0.4rem;
        }

        .param-value {
            font-family: 'JetBrains Mono', monospace;
            color: var(--accent-green);
        }

        input[type="range"] {
            width: 100%;
            height: 6px;
            background: var(--bg-primary);
            border-radius: 3px;
            outline: none;
            -webkit-appearance: none;
        }

        input[type="range"]::-webkit-slider-thumb {
            -webkit-appearance: none;
            width: 16px;
            height: 16px;
            background: var(--accent-green);
            border-radius: 50%;
            cursor: pointer;
        }

        /* Methodology Tab Styles */
        .methodology-content {
            max-width: 800px;
        }

        .methodology-content h2 {
            font-size: 1.25rem;
            margin: 1.5rem 0 0.75rem;
            color: var(--text-primary);
        }

        .methodology-content h2:first-child {
            margin-top: 0;
        }

        .methodology-content p {
            color: var(--text-secondary);
            margin-bottom: 0.75rem;
            font-size: 0.9rem;
        }

        .methodology-content ul {
            color: var(--text-secondary);
            margin-left: 1.25rem;
            margin-bottom: 1rem;
        }

        .methodology-content li {
            margin-bottom: 0.35rem;
            font-size: 0.9rem;
        }

        .methodology-content table {
            width: 100%;
            border-collapse: collapse;
            margin: 1rem 0;
            font-size: 0.85rem;
        }

        .methodology-content th,
        .methodology-content td {
            padding: 0.6rem;
            text-align: left;
            border-bottom: 1px solid var(--border-color);
        }

        .methodology-content th {
            color: var(--text-muted);
            font-weight: 500;
        }

        .methodology-content strong {
            color: var(--text-primary);
        }

        .methodology-content a {
            color: var(--accent-green);
        }

        /* New Code Findings Section */
        .code-findings {
            background: linear-gradient(135deg, var(--bg-tertiary), rgba(0, 217, 146, 0.05));
            border: 1px solid var(--accent-green);
            border-radius: 10px;
            padding: 1.25rem;
            margin-bottom: 1.5rem;
        }

        .code-findings h3 {
            color: var(--accent-green);
            font-size: 1rem;
            margin-bottom: 0.75rem;
            display: flex;
            align-items: center;
            gap: 0.5rem;
        }

        .code-findings ul {
            margin-left: 1rem;
        }

        .code-findings li {
            color: var(--text-secondary);
            font-size: 0.85rem;
            margin-bottom: 0.5rem;
        }

        .code-findings code {
            background: var(--bg-primary);
            padding: 0.15rem 0.4rem;
            border-radius: 4px;
            font-family: 'JetBrains Mono', monospace;
            font-size: 0.75rem;
            color: var(--accent-green);
        }

        /* Donation Box */
        .donation-box {
            background: var(--bg-tertiary);
            border: 1px solid var(--border-color);
            border-radius: 10px;
            padding: 1.25rem;
            margin-top: 1.5rem;
            text-align: center;
        }

        .donation-box h3 {
            font-size: 1rem;
            margin-bottom: 0.5rem;
        }

        .donation-box p {
            font-size: 0.85rem;
            color: var(--text-secondary);
            margin-bottom: 1rem;
        }

        .wallet-box {
            display: flex;
            align-items: center;
            gap: 0.75rem;
            background: var(--bg-primary);
            border: 1px solid var(--border-color);
            border-radius: 8px;
            padding: 0.75rem;
        }

        .wallet-info {
            flex: 1;
            text-align: left;
        }

        .wallet-label {
            font-size: 0.7rem;
            color: var(--text-muted);
        }

        .wallet-address {
            font-family: 'JetBrains Mono', monospace;
            font-size: 0.75rem;
            color: var(--text-primary);
            word-break: break-all;
        }

        .copy-btn {
            background: var(--accent-green);
            color: var(--bg-primary);
            border: none;
            border-radius: 6px;
            padding: 0.5rem 1rem;
            font-family: 'Space Grotesk', sans-serif;
            font-size: 0.8rem;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.2s;
        }

        .copy-btn:hover {
            transform: translateY(-1px);
        }

        .copy-btn.copied {
            background: var(--accent-blue);
        }

        /* Footer */
        footer {
            text-align: center;
            padding: 2rem 0;
            margin-top: 2rem;
            border-top: 1px solid var(--border-color);
            color: var(--text-muted);
            font-size: 0.85rem;
        }

        footer a {
            color: var(--accent-green);
            text-decoration: none;
        }
    </style>
</head>
<body>
    <div class="container">
        <!-- New Code Alert -->
        <div class="code-alert">
            <div class="code-alert-icon">üîç</div>
            <div class="code-alert-content">
                <div class="code-alert-title">New Code Findings <span class="code-alert-tag">Dec 30, 2025</span></div>
                <div class="code-alert-text">Frontend code inspection reveals: weekly distribution infrastructure, 2026 sybil detection logic, 72-hour processing window, and retroactive date checks. Model updated to reflect these findings.</div>
            </div>
        </div>

        <!-- Referral Banner -->
        <div class="referral-banner">
            <div class="referral-text">
                <span>New to Hyperliquid?</span>
                <span class="referral-highlight">Get fee discounts when you sign up with our referral</span>
            </div>
            <a href="https://app.hyperliquid.xyz/join/STRUBE" target="_blank" class="referral-btn">
                Join Hyperliquid ‚Üí
            </a>
        </div>

        <header>
            <div class="logo">
                <div class="logo-icon">HL</div>
            </div>
            <h1>S3 Airdrop Estimator</h1>
            <p class="subtitle">Independent model for estimating potential Hyperliquid Season 3 allocations</p>
            <div class="disclaimer-banner">
                Speculative model only. Actual S3 mechanics are unknown. Not financial advice.
            </div>
        </header>

        <!-- Navigation -->
        <div class="nav-tabs">
            <button class="nav-tab active" data-tab="calculator">
                <span>‚ö°</span> Calculator
            </button>
            <button class="nav-tab" data-tab="methodology">
                <span>üìä</span> Full S3 Methodology
            </button>
        </div>

        <!-- Calculator Tab -->
        <div id="calculator-tab" class="tab-content active">
            <div class="main-grid">
                <div class="left-column">
                    <!-- S3 Structure Selector -->
                    <div class="card">
                        <div class="card-title">
                            <span>üéØ</span> S3 Structure Scenario
                        </div>
                        <div class="structure-selector">
                            <div class="structure-title">
                                <span>üìã</span> Select expected S3 distribution model
                            </div>
                            <div class="structure-options">
                                <div class="structure-option" data-structure="balanced">
                                    <div class="structure-option-name">Balanced</div>
                                    <div class="structure-option-desc">5% retro + 5% ongoing weekly</div>
                                    <div class="structure-option-prob">35% probability</div>
                                </div>
                                <div class="structure-option active" data-structure="retro-heavy">
                                    <div class="structure-option-name">Retro-Heavy</div>
                                    <div class="structure-option-desc">8% retro + 2% ongoing</div>
                                    <div class="structure-option-prob">25% probability</div>
                                </div>
                                <div class="structure-option" data-structure="all-retro">
                                    <div class="structure-option-name">All Retroactive</div>
                                    <div class="structure-option-desc">8% retro only, S4 later</div>
                                    <div class="structure-option-prob">20% probability</div>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- Activity Inputs -->
                    <div class="card">
                        <div class="card-title">
                            <span>üìà</span> Your Activity
                        </div>
                        <p style="font-size: 0.8rem; color: var(--text-secondary); margin-bottom: 1rem;">Enter your volume for each category</p>

                        <div class="activity-grid">
                            <div class="activity-card" id="unitSpotCard">
                                <div class="activity-header">
                                    <div class="activity-icon unit">U</div>
                                    <div>
                                        <div class="activity-name">Unit Spot</div>
                                        <div class="activity-desc">BTC, ETH, SOL via Unit bridge</div>
                                    </div>
                                </div>
                                <div class="activity-inputs">
                                    <div class="input-row">
                                        <label>Volume</label>
                                        <div class="input-wrapper">
                                            <input type="number" id="unitVolume" placeholder="0" min="0">
                                            <span class="input-suffix">USD</span>
                                        </div>
                                    </div>
                                </div>
                            </div>

                            <div class="activity-card" id="nativeSpotCard">
                                <div class="activity-header">
                                    <div class="activity-icon native">N</div>
                                    <div>
                                        <div class="activity-name">Native Spot</div>
                                        <div class="activity-desc">HYPE, PURR, HIP-1 tokens</div>
                                    </div>
                                </div>
                                <div class="activity-inputs">
                                    <div class="input-row">
                                        <label>Volume</label>
                                        <div class="input-wrapper">
                                            <input type="number" id="nativeVolume" placeholder="0" min="0">
                                            <span class="input-suffix">USD</span>
                                        </div>
                                    </div>
                                </div>
                            </div>

                            <div class="activity-card" id="perpsCard">
                                <div class="activity-header">
                                    <div class="activity-icon perps">P</div>
                                    <div>
                                        <div class="activity-name">Perps Trading</div>
                                        <div class="activity-desc">Perpetual futures volume</div>
                                    </div>
                                </div>
                                <div class="activity-inputs">
                                    <div class="input-row">
                                        <label>Volume</label>
                                        <div class="input-wrapper">
                                            <input type="number" id="perpsVolume" placeholder="0" min="0">
                                            <span class="input-suffix">USD</span>
                                        </div>
                                    </div>
                                </div>
                            </div>

                            <div class="activity-card" id="evmCard">
                                <div class="activity-header">
                                    <div class="activity-icon evm">E</div>
                                    <div>
                                        <div class="activity-name">HyperEVM</div>
                                        <div class="activity-desc">Time-weighted average TVL</div>
                                    </div>
                                </div>
                                <div class="activity-inputs">
                                    <div class="input-row">
                                        <label>Avg TVL</label>
                                        <div class="input-wrapper">
                                            <input type="number" id="evmTVL" placeholder="0" min="0">
                                            <span class="input-suffix">USD</span>
                                        </div>
                                    </div>
                                </div>
                                <p class="info-note">Note: EVM allocation methodology is highly uncertain. See methodology for details.</p>
                            </div>
                        </div>

                        <!-- Tier Selection -->
                        <div class="settings-row">
                            <div class="setting-group">
                                <span class="setting-label">Your Estimated Tier</span>
                                <div class="toggle-group" id="tierToggle">
                                    <button class="toggle-btn" data-value="S">S (0.5%)</button>
                                    <button class="toggle-btn active" data-value="A">A (2%)</button>
                                    <button class="toggle-btn" data-value="B">B (10%)</button>
                                    <button class="toggle-btn" data-value="C">C (50%)</button>
                                </div>
                            </div>
                            <div class="setting-group">
                                <span class="setting-label">Vesting Structure</span>
                                <div class="toggle-group" id="vestingToggle">
                                    <button class="toggle-btn active" data-value="none">100% Instant</button>
                                    <button class="toggle-btn" data-value="25-75">25/75 Vest</button>
                                    <button class="toggle-btn" data-value="50-50">50/50 Vest</button>
                                </div>
                            </div>
                        </div>
                        <p class="info-note" id="vestingInfo">All tokens unlock at TGE</p>

                        <div class="checkbox-row">
                            <input type="checkbox" id="infraBonus">
                            <label for="infraBonus">Infrastructure Bonus (speculative, see methodology)</label>
                        </div>
                    </div>

                    <!-- Model Parameters -->
                    <div class="params-section">
                        <div class="params-header" id="paramsHeader">
                            <span class="params-header-title">
                                <span>‚öôÔ∏è</span> Model Parameters
                            </span>
                            <span class="params-chevron">‚ñº</span>
                        </div>
                        <div class="params-content" id="paramsContent">
                            <div class="param-row">
                                <div class="param-label">
                                    <span>S3 Total Size</span>
                                    <span class="param-value" id="s3SizeValue">10%</span>
                                </div>
                                <input type="range" id="s3Size" min="4" max="15" value="10" step="1">
                            </div>
                            <div class="param-row">
                                <div class="param-label">
                                    <span>Spot % of Retroactive</span>
                                    <span class="param-value" id="spotAllocValue">18%</span>
                                </div>
                                <input type="range" id="spotAlloc" min="10" max="25" value="18" step="1">
                            </div>
                            <div class="param-row">
                                <div class="param-label">
                                    <span>Unit % of Spot</span>
                                    <span class="param-value" id="unitShareValue">55%</span>
                                </div>
                                <input type="range" id="unitShare" min="40" max="70" value="55" step="5">
                            </div>
                            <div class="param-row">
                                <div class="param-label">
                                    <span>HYPE Price</span>
                                    <span class="param-value" id="hypePriceValue">$28</span>
                                </div>
                                <input type="range" id="hypePrice" min="20" max="50" value="28" step="1">
                            </div>
                            <p class="info-note">
                                Pool Estimates: Unit $30B | Native $30B | Perps $2.5T | EVM TVL $2B
                            </p>
                        </div>
                    </div>
                </div>

                <!-- Results Panel -->
                <div class="right-column">
                    <div class="results-panel">
                        <div class="card">
                            <div class="total-result">
                                <div class="total-label">Estimated Allocation</div>
                                <div class="total-label" style="font-size: 0.7rem; margin-top: 0.25rem;">TOTAL VALUE</div>
                                <div class="total-value" id="totalUSD">$0</div>
                                <div class="total-hype" id="totalHYPE">~0 HYPE</div>

                                <div class="vesting-breakdown">
                                    <div class="vesting-item">
                                        <div class="vesting-icon">‚ö°</div>
                                        <div class="vesting-label">Instant Unlock</div>
                                        <div class="vesting-value" id="instantUSD">$0</div>
                                        <div class="vesting-hype" id="instantHYPE">0 HYPE</div>
                                    </div>
                                    <div class="vesting-item" id="vestedRow">
                                        <div class="vesting-icon">üîí</div>
                                        <div class="vesting-label">Vested (12mo linear)</div>
                                        <div class="vesting-value" id="vestedUSD">$0</div>
                                        <div class="vesting-hype" id="vestedHYPE">0 HYPE</div>
                                    </div>
                                </div>
                            </div>

                            <!-- Retro vs Ongoing Breakdown -->
                            <div class="allocation-breakdown">
                                <div class="allocation-title">Retroactive vs Ongoing Split</div>
                                <div class="allocation-bar">
                                    <div class="allocation-bar-retro" id="retroBar" style="width: 80%;"></div>
                                    <div class="allocation-bar-ongoing" id="ongoingBar" style="width: 20%;"></div>
                                </div>
                                <div class="allocation-legend">
                                    <div class="allocation-legend-item">
                                        <div class="allocation-dot retro"></div>
                                        <span id="retroLabel">Retroactive: 8%</span>
                                    </div>
                                    <div class="allocation-legend-item">
                                        <div class="allocation-dot ongoing"></div>
                                        <span id="ongoingLabel">Ongoing: 2%</span>
                                    </div>
                                </div>
                            </div>

                            <div class="category-results">
                                <div class="category-title">Breakdown by Category</div>
                                <div class="category-item">
                                    <span class="category-name">Unit Spot</span>
                                    <span class="category-value" id="unitResult">$0</span>
                                </div>
                                <div class="category-item">
                                    <span class="category-name">Native Spot</span>
                                    <span class="category-value" id="nativeResult">$0</span>
                                </div>
                                <div class="category-item">
                                    <span class="category-name">Perps</span>
                                    <span class="category-value" id="perpsResult">$0</span>
                                </div>
                                <div class="category-item">
                                    <span class="category-name">HyperEVM</span>
                                    <span class="category-value" id="evmResult">$0</span>
                                </div>
                            </div>

                            <div class="stats-grid">
                                <div class="stat-box">
                                    <div class="stat-label">Total HYPE</div>
                                    <div class="stat-value" id="statHype">0</div>
                                </div>
                                <div class="stat-box">
                                    <div class="stat-label">Tier Multiplier</div>
                                    <div class="stat-value" id="statTier">1.3x</div>
                                </div>
                                <div class="stat-box">
                                    <div class="stat-label">Est. Fees Paid</div>
                                    <div class="stat-value" id="statFees">$0</div>
                                </div>
                                <div class="stat-box">
                                    <div class="stat-label">ROI</div>
                                    <div class="stat-value" id="statROI">0x</div>
                                </div>
                            </div>
                        </div>

                        <!-- Scenarios -->
                        <div class="card scenarios-card">
                            <div class="card-title">
                                <span>üìä</span> Scenarios
                            </div>
                            <table class="scenarios-table">
                                <thead>
                                    <tr>
                                        <th>Scenario</th>
                                        <th>S3</th>
                                        <th>Price</th>
                                        <th>Value</th>
                                    </tr>
                                </thead>
                                <tbody id="scenarioBody">
                                </tbody>
                            </table>
                        </div>

                        <div class="donation-box">
                            <h3>Found this useful?</h3>
                            <p>This model took significant research to build. If it helped you, consider supporting future updates.</p>
                            <div class="wallet-box">
                                <div class="wallet-info">
                                    <div class="wallet-label">USDC on Arbitrum / HyperEVM</div>
                                    <div class="wallet-address">0x885145521348c8d15c6e07a3e0b2982c00839f38</div>
                                </div>
                                <button class="copy-btn" onclick="copyAddress()">Copy</button>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <div style="text-align: center; margin-top: 2rem;">
                <p style="color: var(--text-secondary); font-size: 0.9rem;">Don't have a Hyperliquid account yet? Start earning towards S3:</p>
                <a href="https://app.hyperliquid.xyz/join/STRUBE" target="_blank" class="referral-btn" style="margin-top: 0.75rem;">
                    Join Hyperliquid with Fee Discount ‚Üí
                </a>
            </div>
        </div>

        <!-- Methodology Tab -->
        <div id="methodology-tab" class="tab-content">
            <div class="methodology-content">
                <!-- New Code Findings -->
                <div class="code-findings">
                    <h3>üîç New Code Findings (Dec 30, 2025)</h3>
                    <p style="color: var(--text-secondary); font-size: 0.85rem; margin-bottom: 0.75rem;">
                        Recent frontend code inspection by @0xKmafia revealed significant S3 infrastructure:
                    </p>
                    <ul>
                        <li><strong>Weekly Distribution Logic:</strong> Code shows <code>week: { value: c, element: x }</code> structure suggesting ongoing weekly rewards</li>
                        <li><strong>2026 Sybil Function:</strong> <code>return 2026 === t.getFullYear()</code> - special sybil review for 2026 activity</li>
                        <li><strong>72-Hour Processing:</strong> <code>tributed.within.72.hours</code> - tokens distributed within 72 hours of announcement</li>
                        <li><strong>Retroactive Date Checks:</strong> <code>n.includes("2023-02") || n.includes("2024-10")</code> - historical activity evaluation</li>
                        <li><strong>Sybil Detection Messages:</strong> "No sybil behavior detected. Points are not slashed." / "Sybil behavior detected, final points will be multiplied..."</li>
                        <li><strong>Placeholder Date:</strong> <code>mostRecentDistributionStartDate: "2030-01-01"</code> - far-future placeholder indicating no distribution yet</li>
                    </ul>
                </div>

                <div class="card">
                    <h2>Model Overview</h2>
                    <p>This calculator provides an independent estimate of potential Hyperliquid Season 3 (S3) airdrop allocations. The model is based on analysis of the Genesis airdrop precedent, current platform metrics, game theory, incentive design principles, and <strong>new frontend code findings</strong>.</p>
                    <p><strong>Important:</strong> This is a speculative model. Actual S3 mechanics are unknown and may differ significantly from these estimates. This is not financial advice.</p>

                    <h3>Core Formula</h3>
                    <p><code>Your HYPE = Retroactive Pool √ó Category % √ó (Your Volume / Pool Volume) √ó Tier Multiplier √ó Infrastructure Bonus (if applicable)</code></p>
                </div>

                <div class="card">
                    <h2>S3 Structure Scenarios</h2>
                    <p>Based on the new code findings showing both retroactive date checks AND weekly distribution infrastructure, we model three likely scenarios:</p>
                    
                    <table>
                        <thead>
                            <tr>
                                <th>Scenario</th>
                                <th>Total S3</th>
                                <th>Retroactive</th>
                                <th>Ongoing</th>
                                <th>Probability</th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr>
                                <td><strong>Balanced</strong></td>
                                <td>10%</td>
                                <td>5% (50M HYPE)</td>
                                <td>5% weekly (50M HYPE)</td>
                                <td>35%</td>
                            </tr>
                            <tr>
                                <td><strong>Retro-Heavy</strong></td>
                                <td>10%</td>
                                <td>8% (80M HYPE)</td>
                                <td>2% weekly (20M HYPE)</td>
                                <td>25%</td>
                            </tr>
                            <tr>
                                <td><strong>All Retroactive</strong></td>
                                <td>8%</td>
                                <td>8% (80M HYPE)</td>
                                <td>0% (S4 announced later)</td>
                                <td>20%</td>
                            </tr>
                        </tbody>
                    </table>
                    
                    <p>The weekly distribution code suggests they've built infrastructure for ongoing rewards, making the "Balanced" scenario most likely. However, Hyperliquid's track record of surprise drops (like Genesis) means "All Retroactive" remains plausible.</p>
                </div>

                <div class="card">
                    <h2>Revised Tier Multipliers</h2>
                    <p>Genesis was surprisingly egalitarian - multipliers were flatter than most airdrops. Based on the new sybil detection logic showing emphasis on quality over quantity, we've revised multipliers downward:</p>
                    
                    <table>
                        <thead>
                            <tr>
                                <th>Tier</th>
                                <th>Percentile</th>
                                <th>Old Multiplier</th>
                                <th>New Multiplier</th>
                                <th>Rationale</th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr>
                                <td><strong>S</strong></td>
                                <td>Top 0.5%</td>
                                <td>1.75x</td>
                                <td>1.45x</td>
                                <td>Whales get premium but capped</td>
                            </tr>
                            <tr>
                                <td><strong>A</strong></td>
                                <td>Top 2%</td>
                                <td>1.40x</td>
                                <td>1.30x</td>
                                <td>Still rewarded, less dramatically</td>
                            </tr>
                            <tr>
                                <td><strong>B</strong></td>
                                <td>Top 10%</td>
                                <td>1.15x</td>
                                <td>1.12x</td>
                                <td>Modest bump for active users</td>
                            </tr>
                            <tr>
                                <td><strong>C</strong></td>
                                <td>Top 50%</td>
                                <td>1.00x</td>
                                <td>1.00x</td>
                                <td>Baseline unchanged</td>
                            </tr>
                        </tbody>
                    </table>
                </div>

                <div class="card">
                    <h2>Category Breakdown (Retroactive Pool)</h2>
                    <p>Allocations for the retroactive component:</p>
                    
                    <table>
                        <thead>
                            <tr>
                                <th>Category</th>
                                <th>% of Retro</th>
                                <th>Rationale</th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr>
                                <td><strong>Perps Trading</strong></td>
                                <td>55%</td>
                                <td>~94% of revenue, core product</td>
                            </tr>
                            <tr>
                                <td><strong>Spot Trading (Total)</strong></td>
                                <td>18%</td>
                                <td>Strategic priority, higher than revenue share</td>
                            </tr>
                            <tr>
                                <td>‚Üí Unit Spot</td>
                                <td>55% of spot (~10%)</td>
                                <td>Collateral backbone, lower wash trading</td>
                            </tr>
                            <tr>
                                <td>‚Üí Native Spot</td>
                                <td>45% of spot (~8%)</td>
                                <td>HYPE/PURR ecosystem</td>
                            </tr>
                            <tr>
                                <td><strong>HyperEVM</strong></td>
                                <td>10%</td>
                                <td>DeFi bootstrap incentive</td>
                            </tr>
                            <tr>
                                <td><strong>Staking/Loyalty</strong></td>
                                <td>12%</td>
                                <td>Long-term holder rewards</td>
                            </tr>
                            <tr>
                                <td><strong>HLP/Other</strong></td>
                                <td>5%</td>
                                <td>Liquidity infrastructure</td>
                            </tr>
                        </tbody>
                    </table>
                </div>

                <div class="card">
                    <h2>Wash Trading Filters</h2>
                    <p>Estimated filter rates based on Genesis precedent:</p>
                    
                    <table>
                        <thead>
                            <tr>
                                <th>Category</th>
                                <th>Filter Rate</th>
                                <th>Rationale</th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr>
                                <td>Unit Spot</td>
                                <td>10-15%</td>
                                <td>Requires real capital, high barrier</td>
                            </tr>
                            <tr>
                                <td>Native Spot (HYPE)</td>
                                <td>60-75%</td>
                                <td>Highest farming target</td>
                            </tr>
                            <tr>
                                <td>Native Spot (other)</td>
                                <td>40-60%</td>
                                <td>Moderate farming</td>
                            </tr>
                            <tr>
                                <td>Perps</td>
                                <td>15-25%</td>
                                <td>Riskier to farm (funding/liquidation)</td>
                            </tr>
                        </tbody>
                    </table>
                </div>

                <div class="card">
                    <h2>Data Sources</h2>
                    <ul>
                        <li><a href="https://unit.hyperdash.info" target="_blank">unit.hyperdash.info</a> - Unit spot volume tracking</li>
                        <li><a href="https://app.artemis.xyz" target="_blank">Artemis</a> - Cross-platform volume comparison</li>
                        <li><a href="https://stats.hyperliquid.xyz" target="_blank">Hyperliquid Stats</a> - Official platform metrics</li>
                        <li><a href="https://twitter.com/0xKmafia" target="_blank">@0xKmafia</a> - Frontend code analysis</li>
                    </ul>
                </div>

                <div class="card">
                    <h2>About This Model</h2>
                    <p>This calculator was developed by <a href="https://twitter.com/0xStrube" target="_blank">@0xStrube</a> through independent analysis of Genesis airdrop patterns, platform metrics, tokenomics, competitive landscape, and game theory principles.</p>
                    <p><strong>Not affiliated with Hyperliquid.</strong> This is an independent community tool for educational purposes.</p>
                    <p>Last updated: December 2025 (v7 - added S3 structure scenarios, revised multipliers, code findings)</p>
                    <p style="margin-top: 1rem;">Questions or feedback? DM <a href="https://twitter.com/0xStrube" target="_blank">@0xStrube</a> on Twitter/X.</p>
                </div>

                <div class="donation-box">
                    <h3>Support This Project</h3>
                    <p>If this model helped inform your strategy, consider a donation to support continued research and updates.</p>
                    <div class="wallet-box">
                        <div class="wallet-info">
                            <div class="wallet-label">USDC on Arbitrum / HyperEVM</div>
                            <div class="wallet-address">0x885145521348c8d15c6e07a3e0b2982c00839f38</div>
                        </div>
                        <button class="copy-btn" onclick="copyAddress()">Copy</button>
                    </div>
                </div>
            </div>
        </div>

        <footer>
            <p>Built by <a href="https://twitter.com/0xStrube" target="_blank">@0xStrube</a> ‚Ä¢ Independent model based on Genesis precedent, platform data, and game theory analysis.</p>
            <p style="margin-top: 0.5rem;">
                <a href="https://app.hyperliquid.xyz/join/STRUBE" target="_blank">Join Hyperliquid</a> ‚Ä¢ 
                Not affiliated with Hyperliquid ‚Ä¢ Educational purposes only
            </p>
        </footer>
    </div>

    <script>
        // Constants
        const TOTAL_SUPPLY = 1_000_000_000;
        
        // REVISED tier multipliers (flatter based on Genesis analysis and sybil code)
        const TIER_MULTIPLIERS = { 'S': 1.45, 'A': 1.30, 'B': 1.12, 'C': 1.00 };
        
        const POOL_VOLUMES = { unit: 30e9, native: 30e9, perps: 2.5e12, evm: 2e9 };
        
        // S3 Structure configurations
        const STRUCTURE_CONFIGS = {
            'balanced': { total: 10, retro: 5, ongoing: 5, retroPct: 50 },
            'retro-heavy': { total: 10, retro: 8, ongoing: 2, retroPct: 80 },
            'all-retro': { total: 8, retro: 8, ongoing: 0, retroPct: 100 }
        };
        
        // Fee tier thresholds and rates (maker rates)
        const SPOT_FEE_TIERS = [
            { maxVol: 10e6, rate: 0.0004 },
            { maxVol: 100e6, rate: 0.0003 },
            { maxVol: 500e6, rate: 0.0002 },
            { maxVol: Infinity, rate: 0.0001 }
        ];

        const PERPS_FEE_TIERS = [
            { maxVol: 10e6, rate: 0.00015 },
            { maxVol: 100e6, rate: 0.00012 },
            { maxVol: 500e6, rate: 0.00008 },
            { maxVol: Infinity, rate: 0.00004 }
        ];

        function getSpotFeeRate(volume) {
            for (const tier of SPOT_FEE_TIERS) {
                if (volume <= tier.maxVol) return tier.rate;
            }
            return SPOT_FEE_TIERS[SPOT_FEE_TIERS.length - 1].rate;
        }

        function getPerpsFeeRate(volume) {
            for (const tier of PERPS_FEE_TIERS) {
                if (volume <= tier.maxVol) return tier.rate;
            }
            return PERPS_FEE_TIERS[PERPS_FEE_TIERS.length - 1].rate;
        }

        // Updated scenarios reflecting new analysis
        const SCENARIOS = [
            { name: 'Conservative', tag: 'bear', s3: 6, price: 24, vest: 'none', structure: 'balanced' },
            { name: 'Base Case', tag: 'base', s3: 10, price: 28, vest: 'none', structure: 'retro-heavy', highlight: true },
            { name: 'Optimistic', tag: 'bull', s3: 10, price: 35, vest: 'none', structure: 'all-retro' },
            { name: 'Bull + Vest', tag: 'bull', s3: 12, price: 40, vest: '50-50', structure: 'retro-heavy' }
        ];

        // Vesting configs: [instantPct, vestedPct]
        const VESTING_CONFIGS = {
            'none': [100, 0],
            '25-75': [25, 75],
            '50-50': [50, 50]
        };

        // State
        let state = {
            unitVolume: 0, nativeVolume: 0, perpsVolume: 0, evmTVL: 0,
            tier: 'A', infraBonus: false, 
            s3Size: 10, spotAlloc: 18, unitShare: 55, hypePrice: 28,
            vesting: 'none',
            structure: 'retro-heavy'
        };

        const $ = id => document.getElementById(id);

        // Copy wallet address
        function copyAddress() {
            const address = '0x885145521348c8d15c6e07a3e0b2982c00839f38';
            navigator.clipboard.writeText(address).then(() => {
                document.querySelectorAll('.copy-btn').forEach(btn => {
                    btn.textContent = 'Copied!';
                    btn.classList.add('copied');
                    setTimeout(() => {
                        btn.textContent = 'Copy';
                        btn.classList.remove('copied');
                    }, 2000);
                });
            });
        }

        // Utility
        function formatUSD(num) {
            if (num >= 1e6) return '$' + (num / 1e6).toFixed(2) + 'M';
            if (num >= 1e3) return '$' + (num / 1e3).toFixed(0) + 'K';
            return '$' + num.toFixed(0);
        }

        function formatHYPE(num) {
            if (num >= 1e6) return (num / 1e6).toFixed(2) + 'M';
            if (num >= 1e3) return num.toLocaleString('en-US', { maximumFractionDigits: 0 });
            return num.toFixed(0);
        }

        // Calculations - uses RETROACTIVE pool only for user allocation
        function calculateCategory(category, volume, params, totalSpotVol, totalPerpsVol) {
            if (volume <= 0) return { hype: 0, usd: 0, fees: 0 };
            
            const structureConfig = STRUCTURE_CONFIGS[params.structure];
            const retroPool = TOTAL_SUPPLY * (structureConfig.retro / 100);
            
            const tierMult = TIER_MULTIPLIERS[params.tier];
            let categoryPool, infraMult = 1, feeRate = 0;

            if (category === 'unit') {
                // Unit gets 55% of the 18% spot allocation of the retroactive pool
                categoryPool = retroPool * (params.spotAlloc / 100) * (params.unitShare / 100);
                if (params.infraBonus) infraMult = 1.15;
                feeRate = getSpotFeeRate(totalSpotVol);
            } else if (category === 'native') {
                categoryPool = retroPool * (params.spotAlloc / 100) * ((100 - params.unitShare) / 100);
                feeRate = getSpotFeeRate(totalSpotVol);
            } else if (category === 'perps') {
                // Perps gets 55% of retroactive pool
                categoryPool = retroPool * 0.55;
                feeRate = getPerpsFeeRate(totalPerpsVol);
            } else {
                // EVM: 10% of retroactive pool
                categoryPool = retroPool * 0.10;
                feeRate = 0;
            }

            const share = volume / POOL_VOLUMES[category];
            const hype = categoryPool * share * tierMult * infraMult;
            return { hype, usd: hype * params.hypePrice, fees: volume * feeRate };
        }

        function calculateAll(params) {
            const totalSpotVol = params.unitVolume + params.nativeVolume;
            const totalPerpsVol = params.perpsVolume;
            
            const unit = calculateCategory('unit', params.unitVolume, params, totalSpotVol, totalPerpsVol);
            const native = calculateCategory('native', params.nativeVolume, params, totalSpotVol, totalPerpsVol);
            const perps = calculateCategory('perps', params.perpsVolume, params, totalSpotVol, totalPerpsVol);
            const evm = calculateCategory('evm', params.evmTVL, params, totalSpotVol, totalPerpsVol);
            const totalHype = unit.hype + native.hype + perps.hype + evm.hype;
            const totalUsd = unit.usd + native.usd + perps.usd + evm.usd;
            const totalFees = unit.fees + native.fees + perps.fees + evm.fees;
            return { unit, native, perps, evm, totalHype, totalUsd, totalFees, roi: totalFees > 0 ? totalUsd / totalFees : 0 };
        }

        function updateResults() {
            const r = calculateAll(state);
            $('totalUSD').textContent = formatUSD(r.totalUsd);
            $('totalHYPE').textContent = '~' + formatHYPE(r.totalHype) + ' HYPE';
            
            // Vesting breakdown
            const vestConfig = VESTING_CONFIGS[state.vesting];
            const instantPct = vestConfig[0] / 100;
            const vestedPct = vestConfig[1] / 100;
            
            const instantHype = r.totalHype * instantPct;
            const instantUsd = r.totalUsd * instantPct;
            const vestedHype = r.totalHype * vestedPct;
            const vestedUsd = r.totalUsd * vestedPct;
            
            $('instantUSD').textContent = formatUSD(instantUsd);
            $('instantHYPE').textContent = formatHYPE(instantHype) + ' HYPE';
            
            if (vestedPct > 0) {
                $('vestedRow').style.display = 'flex';
                $('vestedUSD').textContent = formatUSD(vestedUsd);
                $('vestedHYPE').textContent = formatHYPE(vestedHype) + ' HYPE';
            } else {
                $('vestedRow').style.display = 'none';
            }
            
            // Update allocation breakdown bar
            const structureConfig = STRUCTURE_CONFIGS[state.structure];
            const retroPct = structureConfig.retroPct;
            $('retroBar').style.width = retroPct + '%';
            $('ongoingBar').style.width = (100 - retroPct) + '%';
            $('retroLabel').textContent = `Retroactive: ${structureConfig.retro}%`;
            $('ongoingLabel').textContent = `Ongoing: ${structureConfig.ongoing}%`;
            
            $('unitResult').textContent = formatUSD(r.unit.usd);
            $('nativeResult').textContent = formatUSD(r.native.usd);
            $('perpsResult').textContent = formatUSD(r.perps.usd);
            $('evmResult').textContent = formatUSD(r.evm.usd);
            ['unitResult', 'nativeResult', 'perpsResult', 'evmResult'].forEach(id => {
                $(id).classList.toggle('zero', parseFloat($(id).textContent.replace(/[$,KM]/g, '')) === 0);
            });
            $('statHype').textContent = formatHYPE(r.totalHype);
            $('statTier').textContent = TIER_MULTIPLIERS[state.tier] + 'x';
            $('statFees').textContent = formatUSD(r.totalFees);
            $('statROI').textContent = r.roi > 0 ? '~' + Math.round(r.roi) + 'x' : '-';
            ['unitSpotCard', 'nativeSpotCard', 'perpsCard', 'evmCard'].forEach((id, i) => {
                const vals = [state.unitVolume, state.nativeVolume, state.perpsVolume, state.evmTVL];
                $(id).classList.toggle('has-value', vals[i] > 0);
            });
            updateScenarios();
        }

        function updateScenarios() {
            $('scenarioBody').innerHTML = SCENARIOS.map(s => {
                const scenarioState = { 
                    ...state, 
                    s3Size: s.s3, 
                    hypePrice: s.price,
                    structure: s.structure || state.structure
                };
                const r = calculateAll(scenarioState);
                const vestConfig = VESTING_CONFIGS[s.vest || 'none'];
                const instantPct = vestConfig[0] / 100;
                const instantVal = r.totalUsd * instantPct;
                const vestLabel = s.vest === 'none' ? '' : ` (${vestConfig[0]}/${vestConfig[1]})`;
                return `<tr class="${s.highlight ? 'highlight' : ''}">
                    <td><span class="tag ${s.tag}">${s.name}</span></td>
                    <td>${s.s3}%${vestLabel}</td><td>$${s.price}</td>
                    <td>${formatUSD(r.totalUsd)}${s.vest !== 'none' ? '<br><span style="font-size:0.65rem;color:var(--text-muted);">‚ö°' + formatUSD(instantVal) + '</span>' : ''}</td></tr>`;
            }).join('');
        }

        function init() {
            // Tab navigation
            document.querySelectorAll('.nav-tab').forEach(tab => {
                tab.addEventListener('click', () => {
                    document.querySelectorAll('.nav-tab').forEach(t => t.classList.remove('active'));
                    document.querySelectorAll('.tab-content').forEach(c => c.classList.remove('active'));
                    tab.classList.add('active');
                    $(tab.dataset.tab + '-tab').classList.add('active');
                });
            });

            // Structure selector
            document.querySelectorAll('.structure-option').forEach(opt => {
                opt.addEventListener('click', () => {
                    document.querySelectorAll('.structure-option').forEach(o => o.classList.remove('active'));
                    opt.classList.add('active');
                    state.structure = opt.dataset.structure;
                    
                    // Update s3Size slider to match structure
                    const config = STRUCTURE_CONFIGS[state.structure];
                    state.s3Size = config.total;
                    $('s3Size').value = config.total;
                    $('s3SizeValue').textContent = config.total + '%';
                    
                    updateResults();
                });
            });

            // Inputs
            ['unitVolume', 'nativeVolume', 'perpsVolume', 'evmTVL'].forEach(id => {
                $(id).addEventListener('input', e => { state[id] = parseFloat(e.target.value) || 0; updateResults(); });
            });

            // Tier
            $('tierToggle').querySelectorAll('.toggle-btn').forEach(btn => {
                btn.addEventListener('click', () => {
                    $('tierToggle').querySelectorAll('.toggle-btn').forEach(b => b.classList.remove('active'));
                    btn.classList.add('active');
                    state.tier = btn.dataset.value;
                    updateResults();
                });
            });

            // Vesting toggle
            $('vestingToggle').querySelectorAll('.toggle-btn').forEach(btn => {
                btn.addEventListener('click', () => {
                    $('vestingToggle').querySelectorAll('.toggle-btn').forEach(b => b.classList.remove('active'));
                    btn.classList.add('active');
                    state.vesting = btn.dataset.value;
                    const infoTexts = {
                        'none': 'All tokens unlock at TGE',
                        '25-75': '25% at TGE, 75% vests over 12 months',
                        '50-50': '50% at TGE, 50% vests over 12 months'
                    };
                    $('vestingInfo').textContent = infoTexts[state.vesting];
                    updateResults();
                });
            });

            // Checkbox
            $('infraBonus').addEventListener('change', e => { state.infraBonus = e.target.checked; updateResults(); });

            // Ranges
            [['s3Size', '%'], ['spotAlloc', '%'], ['unitShare', '%'], ['hypePrice', '$']].forEach(([id, sfx]) => {
                $(id).addEventListener('input', e => {
                    state[id] = parseFloat(e.target.value);
                    $(id + 'Value').textContent = (sfx === '$' ? '$' : '') + e.target.value + (sfx === '%' ? '%' : '');
                    updateResults();
                });
            });

            // Collapsible
            $('paramsHeader').addEventListener('click', () => {
                $('paramsHeader').classList.toggle('open');
                $('paramsContent').classList.toggle('open');
            });

            updateResults();
        }

        init();
    </script>
</body>
</html>
