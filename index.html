<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Hyperliquid S3 Airdrop Estimator</title>
    <meta name="description" content="Independent model for estimating potential Hyperliquid Season 3 airdrop allocations based on trading activity.">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=JetBrains+Mono:wght@400;500;600;700&family=Space+Grotesk:wght@400;500;600;700&display=swap" rel="stylesheet">
    <style>
        :root {
            --bg-primary: #0a0e14;
            --bg-secondary: #111820;
            --bg-tertiary: #1a2332;
            --bg-card: #151d2a;
            --border-color: #2a3a4d;
            --border-active: #3d5a80;
            --text-primary: #e8edf5;
            --text-secondary: #8b9bb4;
            --text-muted: #5a6a7d;
            --accent-green: #00d992;
            --accent-green-dim: rgba(0, 217, 146, 0.15);
            --accent-green-medium: rgba(0, 217, 146, 0.3);
            --accent-red: #ff4757;
            --accent-blue: #4da3ff;
            --accent-purple: #a855f7;
            --accent-yellow: #fbbf24;
            --accent-orange: #f97316;
            --glow-green: 0 0 30px rgba(0, 217, 146, 0.3);
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Space Grotesk', sans-serif;
            background: var(--bg-primary);
            color: var(--text-primary);
            min-height: 100vh;
            line-height: 1.6;
        }

        body::before {
            content: '';
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background-image: 
                linear-gradient(rgba(0, 217, 146, 0.02) 1px, transparent 1px),
                linear-gradient(90deg, rgba(0, 217, 146, 0.02) 1px, transparent 1px);
            background-size: 60px 60px;
            pointer-events: none;
            z-index: -1;
        }

        .container {
            max-width: 1300px;
            margin: 0 auto;
            padding: 1.5rem;
        }

        /* Referral Banner */
        .referral-banner {
            background: linear-gradient(135deg, var(--bg-tertiary), var(--bg-card));
            border: 1px solid var(--accent-green);
            border-radius: 10px;
            padding: 0.75rem 1.25rem;
            margin-bottom: 1rem;
            display: flex;
            align-items: center;
            justify-content: space-between;
            flex-wrap: wrap;
            gap: 0.75rem;
        }

        .referral-text {
            display: flex;
            align-items: center;
            gap: 0.5rem;
            font-size: 0.9rem;
        }

        .referral-highlight {
            color: var(--accent-green);
            font-weight: 600;
        }

        .referral-btn {
            background: var(--accent-green);
            color: var(--bg-primary);
            border: none;
            border-radius: 6px;
            padding: 0.5rem 1rem;
            font-family: 'Space Grotesk', sans-serif;
            font-size: 0.85rem;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.2s;
            text-decoration: none;
            display: inline-flex;
            align-items: center;
            gap: 0.4rem;
        }

        .referral-btn:hover {
            transform: translateY(-1px);
            box-shadow: 0 4px 12px rgba(0, 217, 146, 0.3);
        }

        /* Navigation Tabs */
        .nav-tabs {
            display: flex;
            gap: 0.5rem;
            margin-bottom: 1.5rem;
            border-bottom: 1px solid var(--border-color);
            padding-bottom: 1rem;
        }

        .nav-tab {
            background: var(--bg-tertiary);
            border: 1px solid var(--border-color);
            border-radius: 8px;
            padding: 0.6rem 1.25rem;
            font-family: 'Space Grotesk', sans-serif;
            font-size: 0.9rem;
            font-weight: 500;
            color: var(--text-secondary);
            cursor: pointer;
            transition: all 0.2s;
            display: flex;
            align-items: center;
            gap: 0.4rem;
        }

        .nav-tab:hover {
            border-color: var(--accent-green);
            color: var(--text-primary);
        }

        .nav-tab.active {
            background: var(--accent-green-dim);
            border-color: var(--accent-green);
            color: var(--accent-green);
        }

        .tab-content {
            display: none;
        }

        .tab-content.active {
            display: block;
        }

        /* Header */
        header {
            text-align: center;
            padding: 2rem 0 1.5rem;
            border-bottom: 1px solid var(--border-color);
            margin-bottom: 1.5rem;
        }

        .logo {
            display: inline-flex;
            align-items: center;
            gap: 0.75rem;
            margin-bottom: 0.75rem;
        }

        .logo-icon {
            width: 44px;
            height: 44px;
            background: linear-gradient(135deg, var(--accent-green), #00b37a);
            border-radius: 10px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: 700;
            font-size: 1.25rem;
            box-shadow: var(--glow-green);
        }

        h1 {
            font-size: 2rem;
            font-weight: 700;
            letter-spacing: -0.02em;
            background: linear-gradient(135deg, var(--text-primary), var(--accent-green));
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
        }

        .subtitle {
            color: var(--text-secondary);
            font-size: 1rem;
            margin-top: 0.35rem;
        }

        .disclaimer-banner {
            background: rgba(255, 71, 87, 0.1);
            border: 1px solid rgba(255, 71, 87, 0.3);
            border-radius: 8px;
            padding: 0.6rem 1rem;
            margin-top: 1rem;
            font-size: 0.8rem;
            color: var(--accent-red);
            display: inline-block;
        }

        /* Main Layout */
        .main-grid {
            display: grid;
            grid-template-columns: 1fr 380px;
            gap: 1.5rem;
        }

        @media (max-width: 1000px) {
            .main-grid {
                grid-template-columns: 1fr;
            }
        }

        /* Cards */
        .card {
            background: var(--bg-card);
            border: 1px solid var(--border-color);
            border-radius: 14px;
            padding: 1.25rem;
        }

        .card-title {
            font-size: 1rem;
            font-weight: 600;
            color: var(--text-primary);
            margin-bottom: 1rem;
            display: flex;
            align-items: center;
            gap: 0.5rem;
        }

        /* Activity Input Grid */
        .activity-grid {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 1rem;
        }

        @media (max-width: 700px) {
            .activity-grid {
                grid-template-columns: 1fr;
            }
        }

        .activity-card {
            background: var(--bg-tertiary);
            border: 1px solid var(--border-color);
            border-radius: 10px;
            padding: 1rem;
            transition: all 0.2s;
        }

        .activity-card:hover {
            border-color: var(--border-active);
        }

        .activity-card.has-value {
            border-color: var(--accent-green);
            background: linear-gradient(135deg, var(--bg-tertiary), rgba(0, 217, 146, 0.05));
        }

        .activity-header {
            display: flex;
            align-items: center;
            gap: 0.6rem;
            margin-bottom: 0.75rem;
        }

        .activity-icon {
            width: 32px;
            height: 32px;
            border-radius: 8px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 1rem;
        }

        .activity-icon.unit { background: rgba(0, 217, 146, 0.2); }
        .activity-icon.native { background: rgba(168, 85, 247, 0.2); }
        .activity-icon.perps { background: rgba(77, 163, 255, 0.2); }
        .activity-icon.evm { background: rgba(249, 115, 22, 0.2); }

        .activity-name {
            font-weight: 600;
            font-size: 0.95rem;
        }

        .activity-desc {
            font-size: 0.75rem;
            color: var(--text-muted);
        }

        .activity-inputs {
            display: flex;
            flex-direction: column;
            gap: 0.6rem;
        }

        .input-row {
            display: flex;
            gap: 0.5rem;
            align-items: center;
        }

        .input-row label {
            font-size: 0.75rem;
            color: var(--text-secondary);
            min-width: 55px;
        }

        .input-wrapper {
            position: relative;
            flex: 1;
        }

        input[type="number"] {
            width: 100%;
            background: var(--bg-primary);
            border: 1px solid var(--border-color);
            border-radius: 6px;
            padding: 0.5rem 0.75rem;
            padding-right: 2.5rem;
            font-family: 'JetBrains Mono', monospace;
            font-size: 0.85rem;
            color: var(--text-primary);
            transition: all 0.2s;
        }

        input[type="number"]:focus {
            outline: none;
            border-color: var(--accent-green);
            box-shadow: 0 0 0 2px var(--accent-green-dim);
        }

        .input-suffix {
            position: absolute;
            right: 0.6rem;
            top: 50%;
            transform: translateY(-50%);
            color: var(--text-muted);
            font-family: 'JetBrains Mono', monospace;
            font-size: 0.7rem;
        }

        input[type="number"]::-webkit-inner-spin-button {
            opacity: 0;
        }

        /* Tier and Settings */
        .settings-row {
            display: flex;
            gap: 1rem;
            margin-top: 1rem;
            flex-wrap: wrap;
        }

        .setting-group {
            flex: 1;
            min-width: 200px;
        }

        .setting-label {
            font-size: 0.8rem;
            color: var(--text-secondary);
            margin-bottom: 0.5rem;
            display: block;
        }

        .toggle-group {
            display: flex;
            gap: 0.35rem;
            flex-wrap: wrap;
        }

        .toggle-btn {
            background: var(--bg-tertiary);
            border: 1px solid var(--border-color);
            border-radius: 6px;
            padding: 0.4rem 0.7rem;
            font-family: 'Space Grotesk', sans-serif;
            font-size: 0.75rem;
            color: var(--text-secondary);
            cursor: pointer;
            transition: all 0.2s;
        }

        .toggle-btn:hover {
            border-color: var(--accent-green);
        }

        .toggle-btn.active {
            background: var(--accent-green-dim);
            border-color: var(--accent-green);
            color: var(--accent-green);
        }

        .checkbox-label {
            display: flex;
            align-items: center;
            gap: 0.5rem;
            font-size: 0.8rem;
            color: var(--text-secondary);
            cursor: pointer;
            padding: 0.5rem 0;
        }

        .checkbox-label input {
            accent-color: var(--accent-green);
        }

        /* Model Parameters */
        .params-grid {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 1rem;
            margin-top: 1rem;
        }

        @media (max-width: 500px) {
            .params-grid {
                grid-template-columns: 1fr;
            }
        }

        .range-container {
            background: var(--bg-tertiary);
            border-radius: 8px;
            padding: 0.75rem;
        }

        .range-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 0.4rem;
        }

        .range-label {
            font-size: 0.75rem;
            color: var(--text-secondary);
        }

        .range-value {
            font-family: 'JetBrains Mono', monospace;
            font-size: 0.85rem;
            color: var(--accent-green);
            font-weight: 600;
        }

        input[type="range"] {
            width: 100%;
            height: 4px;
            background: var(--bg-primary);
            border-radius: 2px;
            outline: none;
            -webkit-appearance: none;
        }

        input[type="range"]::-webkit-slider-thumb {
            -webkit-appearance: none;
            width: 14px;
            height: 14px;
            background: var(--accent-green);
            border-radius: 50%;
            cursor: pointer;
            box-shadow: 0 0 10px rgba(0, 217, 146, 0.4);
        }

        /* Results Section */
        .results-section {
            position: sticky;
            top: 1.5rem;
        }

        .results-card {
            background: linear-gradient(135deg, var(--bg-card), var(--bg-tertiary));
            border: 1px solid var(--accent-green);
            box-shadow: var(--glow-green);
        }

        .result-main {
            text-align: center;
            padding: 1.5rem 0;
            border-bottom: 1px solid var(--border-color);
            margin-bottom: 1rem;
        }

        .result-label {
            font-size: 0.8rem;
            color: var(--text-secondary);
            text-transform: uppercase;
            letter-spacing: 0.1em;
            margin-bottom: 0.35rem;
        }

        .result-value {
            font-family: 'JetBrains Mono', monospace;
            font-size: 2.5rem;
            font-weight: 700;
            color: var(--accent-green);
            text-shadow: 0 0 30px rgba(0, 217, 146, 0.4);
        }

        .result-hype {
            font-size: 1.1rem;
            color: var(--text-secondary);
            margin-top: 0.2rem;
        }

        /* CTA in results */
        .results-cta {
            background: var(--bg-tertiary);
            border: 1px dashed var(--accent-green);
            border-radius: 8px;
            padding: 1rem;
            margin-top: 1rem;
            text-align: center;
        }

        .results-cta p {
            font-size: 0.85rem;
            color: var(--text-secondary);
            margin-bottom: 0.75rem;
        }

        .results-cta a {
            display: inline-flex;
            align-items: center;
            gap: 0.4rem;
            background: var(--accent-green);
            color: var(--bg-primary);
            padding: 0.6rem 1.25rem;
            border-radius: 6px;
            font-weight: 600;
            font-size: 0.9rem;
            text-decoration: none;
            transition: all 0.2s;
        }

        .results-cta a:hover {
            transform: translateY(-1px);
            box-shadow: 0 4px 12px rgba(0, 217, 146, 0.3);
        }

        /* Category Breakdown */
        .breakdown-section {
            margin-bottom: 1rem;
        }

        .breakdown-title {
            font-size: 0.75rem;
            color: var(--text-muted);
            text-transform: uppercase;
            letter-spacing: 0.05em;
            margin-bottom: 0.5rem;
        }

        .breakdown-item {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 0.5rem 0;
            border-bottom: 1px solid var(--border-color);
        }

        .breakdown-item:last-child {
            border-bottom: none;
        }

        .breakdown-cat {
            display: flex;
            align-items: center;
            gap: 0.5rem;
            font-size: 0.85rem;
        }

        .breakdown-dot {
            width: 8px;
            height: 8px;
            border-radius: 50%;
        }

        .breakdown-dot.unit { background: var(--accent-green); }
        .breakdown-dot.native { background: var(--accent-purple); }
        .breakdown-dot.perps { background: var(--accent-blue); }
        .breakdown-dot.evm { background: var(--accent-orange); }

        .breakdown-value {
            font-family: 'JetBrains Mono', monospace;
            font-size: 0.85rem;
            color: var(--text-primary);
        }

        .breakdown-value.zero {
            color: var(--text-muted);
        }

        /* Stats Grid */
        .stats-grid {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 0.75rem;
            margin-top: 1rem;
        }

        .stat-item {
            background: var(--bg-tertiary);
            border-radius: 8px;
            padding: 0.75rem;
            text-align: center;
        }

        .stat-label {
            font-size: 0.65rem;
            color: var(--text-muted);
            text-transform: uppercase;
            letter-spacing: 0.05em;
            margin-bottom: 0.2rem;
        }

        .stat-value {
            font-family: 'JetBrains Mono', monospace;
            font-size: 1rem;
            font-weight: 600;
        }

        .stat-value.green { color: var(--accent-green); }
        .stat-value.blue { color: var(--accent-blue); }
        .stat-value.purple { color: var(--accent-purple); }
        .stat-value.yellow { color: var(--accent-yellow); }

        /* Scenario Table */
        .scenario-card {
            margin-top: 1rem;
        }

        .scenario-table {
            width: 100%;
            border-collapse: collapse;
            font-size: 0.8rem;
        }

        .scenario-table th {
            text-align: left;
            padding: 0.5rem;
            background: var(--bg-tertiary);
            color: var(--text-muted);
            font-weight: 500;
            font-size: 0.7rem;
            text-transform: uppercase;
            letter-spacing: 0.03em;
        }

        .scenario-table td {
            padding: 0.5rem;
            border-bottom: 1px solid var(--border-color);
            font-family: 'JetBrains Mono', monospace;
            font-size: 0.8rem;
        }

        .scenario-table tr:hover {
            background: var(--bg-tertiary);
        }

        .scenario-table tr.highlight {
            background: var(--accent-green-dim);
        }

        .scenario-table tr.highlight td {
            color: var(--accent-green);
            font-weight: 600;
        }

        .tag {
            display: inline-block;
            padding: 0.15rem 0.4rem;
            border-radius: 4px;
            font-size: 0.7rem;
            font-weight: 500;
        }

        .tag.bear { background: rgba(255, 71, 87, 0.2); color: var(--accent-red); }
        .tag.base { background: var(--accent-green-dim); color: var(--accent-green); }
        .tag.bull { background: rgba(77, 163, 255, 0.2); color: var(--accent-blue); }

        /* Donation Box */
        .donation-box {
            background: var(--bg-tertiary);
            border: 1px solid var(--border-color);
            border-radius: 10px;
            padding: 1.25rem;
            margin: 1.5rem 0;
            text-align: center;
        }

        .donation-box h3 {
            font-size: 1rem;
            color: var(--text-primary);
            margin-bottom: 0.5rem;
        }

        .donation-box p {
            font-size: 0.85rem;
            color: var(--text-secondary);
            margin-bottom: 1rem;
        }

        .wallet-box {
            background: var(--bg-primary);
            border: 1px solid var(--border-color);
            border-radius: 8px;
            padding: 0.75rem 1rem;
            display: flex;
            align-items: center;
            justify-content: space-between;
            gap: 1rem;
            flex-wrap: wrap;
        }

        .wallet-info {
            text-align: left;
        }

        .wallet-label {
            font-size: 0.7rem;
            color: var(--text-muted);
            margin-bottom: 0.15rem;
        }

        .wallet-address {
            font-family: 'JetBrains Mono', monospace;
            font-size: 0.75rem;
            color: var(--accent-green);
            word-break: break-all;
        }

        .copy-btn {
            background: var(--bg-card);
            border: 1px solid var(--border-color);
            border-radius: 6px;
            padding: 0.4rem 0.75rem;
            font-family: 'Space Grotesk', sans-serif;
            font-size: 0.75rem;
            color: var(--text-secondary);
            cursor: pointer;
            transition: all 0.2s;
        }

        .copy-btn:hover {
            border-color: var(--accent-green);
            color: var(--accent-green);
        }

        .copy-btn.copied {
            background: var(--accent-green-dim);
            border-color: var(--accent-green);
            color: var(--accent-green);
        }

        /* Methodology Page Styles */
        .methodology-page {
            max-width: 900px;
            margin: 0 auto;
        }

        .methodology-page .card {
            margin-bottom: 1.5rem;
        }

        .methodology-page h2 {
            color: var(--accent-green);
            font-size: 1.25rem;
            margin-bottom: 1rem;
            padding-bottom: 0.5rem;
            border-bottom: 1px solid var(--border-color);
        }

        .methodology-page h3 {
            color: var(--text-primary);
            font-size: 1rem;
            margin: 1.25rem 0 0.5rem;
        }

        .methodology-page p {
            color: var(--text-secondary);
            margin-bottom: 0.75rem;
            line-height: 1.7;
        }

        .methodology-page ul {
            color: var(--text-secondary);
            margin: 0.75rem 0;
            padding-left: 1.5rem;
        }

        .methodology-page li {
            margin-bottom: 0.5rem;
        }

        .formula-box {
            background: var(--bg-tertiary);
            border: 1px solid var(--border-color);
            border-radius: 8px;
            padding: 1rem;
            margin: 1rem 0;
            font-family: 'JetBrains Mono', monospace;
            font-size: 0.85rem;
            overflow-x: auto;
            color: var(--accent-green);
        }

        .data-table {
            width: 100%;
            border-collapse: collapse;
            margin: 1rem 0;
            font-size: 0.85rem;
        }

        .data-table th {
            background: var(--bg-tertiary);
            padding: 0.75rem;
            text-align: left;
            font-weight: 600;
            color: var(--text-primary);
            border-bottom: 1px solid var(--border-color);
        }

        .data-table td {
            padding: 0.75rem;
            border-bottom: 1px solid var(--border-color);
            color: var(--text-secondary);
        }

        .data-table tr:hover {
            background: var(--bg-tertiary);
        }

        .highlight-box {
            background: var(--accent-green-dim);
            border: 1px solid var(--accent-green);
            border-radius: 8px;
            padding: 1rem;
            margin: 1rem 0;
        }

        .highlight-box p {
            color: var(--text-primary);
            margin: 0;
        }

        .warning-box {
            background: rgba(255, 71, 87, 0.1);
            border: 1px solid rgba(255, 71, 87, 0.3);
            border-radius: 8px;
            padding: 1rem;
            margin: 1rem 0;
        }

        .warning-box p {
            color: var(--accent-red);
            margin: 0;
        }

        .info-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 1rem;
            margin: 1rem 0;
        }

        .info-card {
            background: var(--bg-tertiary);
            border-radius: 8px;
            padding: 1rem;
            text-align: center;
        }

        .info-card-label {
            font-size: 0.75rem;
            color: var(--text-muted);
            text-transform: uppercase;
            letter-spacing: 0.05em;
            margin-bottom: 0.25rem;
        }

        .info-card-value {
            font-family: 'JetBrains Mono', monospace;
            font-size: 1.25rem;
            font-weight: 600;
            color: var(--accent-green);
        }

        .info-card-note {
            font-size: 0.75rem;
            color: var(--text-muted);
            margin-top: 0.25rem;
        }

        /* Collapsible */
        .collapsible-header {
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: space-between;
        }

        .collapsible-header .arrow {
            transition: transform 0.2s;
        }

        .collapsible-header.open .arrow {
            transform: rotate(180deg);
        }

        .collapsible-content {
            display: none;
            padding-top: 1rem;
        }

        .collapsible-content.open {
            display: block;
        }

        /* Pool info */
        .pool-info {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(140px, 1fr));
            gap: 0.5rem;
            margin: 0.75rem 0;
        }

        .pool-item {
            background: var(--bg-tertiary);
            border-radius: 6px;
            padding: 0.6rem;
            text-align: center;
        }

        .pool-name {
            font-size: 0.7rem;
            color: var(--text-muted);
            margin-bottom: 0.15rem;
        }

        .pool-vol {
            font-family: 'JetBrains Mono', monospace;
            font-size: 0.85rem;
            color: var(--accent-green);
        }

        /* Footer */
        footer {
            text-align: center;
            padding: 2rem 0;
            color: var(--text-muted);
            font-size: 0.8rem;
            border-top: 1px solid var(--border-color);
            margin-top: 2rem;
        }

        footer a {
            color: var(--accent-green);
            text-decoration: none;
        }

        /* Mobile adjustments */
        @media (max-width: 600px) {
            .referral-banner {
                flex-direction: column;
                text-align: center;
            }
            
            .wallet-box {
                flex-direction: column;
                text-align: center;
            }
            
            .wallet-info {
                text-align: center;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <!-- Referral Banner -->
        <div class="referral-banner">
            <div class="referral-text">
                <span>New to Hyperliquid? Get <span class="referral-highlight">fee discounts</span> when you sign up with our referral</span>
            </div>
            <a href="https://app.hyperliquid.xyz/join/STRUBE" target="_blank" class="referral-btn">
                Join Hyperliquid →
            </a>
        </div>

        <header>
            <div class="logo">
                <div class="logo-icon">HL</div>
                <h1>S3 Airdrop Estimator</h1>
            </div>
            <p class="subtitle">Independent model for estimating potential Hyperliquid Season 3 allocations</p>
            <div class="disclaimer-banner">
                Speculative model only. Actual S3 mechanics are unknown. Not financial advice.
            </div>
        </header>

        <!-- Navigation Tabs -->
        <div class="nav-tabs">
            <button class="nav-tab active" data-tab="calculator">Calculator</button>
            <button class="nav-tab" data-tab="methodology">Full S3 Methodology</button>
        </div>

        <!-- Calculator Tab -->
        <div class="tab-content active" id="calculator-tab">
            <div class="main-grid">
                <!-- Input Section -->
                <div class="input-section">
                    <div class="card">
                        <h2 class="card-title">
                            Your Activity
                        </h2>
                        <p style="color: var(--text-secondary); font-size: 0.85rem; margin-bottom: 1rem;">Enter your volume for each category</p>

                        <div class="activity-grid">
                            <!-- Unit Spot -->
                            <div class="activity-card" id="unitSpotCard">
                                <div class="activity-header">
                                    <div class="activity-icon unit">U</div>
                                    <div>
                                        <div class="activity-name">Unit Spot</div>
                                        <div class="activity-desc">BTC, ETH, SOL via Unit bridge</div>
                                    </div>
                                </div>
                                <div class="activity-inputs">
                                    <div class="input-row">
                                        <label>Volume</label>
                                        <div class="input-wrapper">
                                            <input type="number" id="unitVolume" value="0" min="0" step="1000000">
                                            <span class="input-suffix">USD</span>
                                        </div>
                                    </div>
                                </div>
                            </div>

                            <!-- Native Spot -->
                            <div class="activity-card" id="nativeSpotCard">
                                <div class="activity-header">
                                    <div class="activity-icon native">N</div>
                                    <div>
                                        <div class="activity-name">Native Spot</div>
                                        <div class="activity-desc">HYPE, PURR, HIP-1 tokens</div>
                                    </div>
                                </div>
                                <div class="activity-inputs">
                                    <div class="input-row">
                                        <label>Volume</label>
                                        <div class="input-wrapper">
                                            <input type="number" id="nativeVolume" value="0" min="0" step="1000000">
                                            <span class="input-suffix">USD</span>
                                        </div>
                                    </div>
                                </div>
                            </div>

                            <!-- Perps -->
                            <div class="activity-card" id="perpsCard">
                                <div class="activity-header">
                                    <div class="activity-icon perps">P</div>
                                    <div>
                                        <div class="activity-name">Perps Trading</div>
                                        <div class="activity-desc">Perpetual futures volume</div>
                                    </div>
                                </div>
                                <div class="activity-inputs">
                                    <div class="input-row">
                                        <label>Volume</label>
                                        <div class="input-wrapper">
                                            <input type="number" id="perpsVolume" value="0" min="0" step="1000000">
                                            <span class="input-suffix">USD</span>
                                        </div>
                                    </div>
                                </div>
                            </div>

                            <!-- HyperEVM -->
                            <div class="activity-card" id="evmCard">
                                <div class="activity-header">
                                    <div class="activity-icon evm">E</div>
                                    <div>
                                        <div class="activity-name">HyperEVM</div>
                                        <div class="activity-desc">Time-weighted average TVL</div>
                                    </div>
                                </div>
                                <div class="activity-inputs">
                                    <div class="input-row">
                                        <label>Avg TVL</label>
                                        <div class="input-wrapper">
                                            <input type="number" id="evmTVL" value="0" min="0" step="1000">
                                            <span class="input-suffix">USD</span>
                                        </div>
                                    </div>
                                </div>
                                <p style="font-size: 0.7rem; color: var(--text-muted); margin-top: 0.5rem;">Note: EVM allocation methodology is highly uncertain. See methodology for details.</p>
                            </div>
                        </div>

                        <div class="settings-row">
                            <div class="setting-group">
                                <span class="setting-label">Your Estimated Tier</span>
                                <div class="toggle-group" id="tierToggle">
                                    <button class="toggle-btn" data-value="S">S (0.5%)</button>
                                    <button class="toggle-btn active" data-value="A">A (2%)</button>
                                    <button class="toggle-btn" data-value="B">B (10%)</button>
                                    <button class="toggle-btn" data-value="C">C (50%)</button>
                                </div>
                            </div>
                            <div class="setting-group">
                                <label class="checkbox-label">
                                    <input type="checkbox" id="infraBonus">
                                    Infrastructure Bonus (speculative, see methodology)
                                </label>
                            </div>
                        </div>
                    </div>

                    <!-- Model Parameters -->
                    <div class="card" style="margin-top: 1rem;">
                        <div class="collapsible-header" id="paramsHeader">
                            <h2 class="card-title" style="margin-bottom: 0;">
                                Model Parameters
                            </h2>
                            <span class="arrow">▼</span>
                        </div>
                        <div class="collapsible-content" id="paramsContent">
                            <div class="params-grid">
                                <div class="range-container">
                                    <div class="range-header">
                                        <span class="range-label">S3 Total Size</span>
                                        <span class="range-value" id="s3SizeValue">7%</span>
                                    </div>
                                    <input type="range" id="s3Size" min="4" max="12" value="7" step="0.5">
                                </div>

                                <div class="range-container">
                                    <div class="range-header">
                                        <span class="range-label">Spot % of S3</span>
                                        <span class="range-value" id="spotAllocValue">16%</span>
                                    </div>
                                    <input type="range" id="spotAlloc" min="8" max="28" value="16" step="1">
                                </div>

                                <div class="range-container">
                                    <div class="range-header">
                                        <span class="range-label">Unit % of Spot</span>
                                        <span class="range-value" id="unitShareValue">55%</span>
                                    </div>
                                    <input type="range" id="unitShare" min="40" max="70" value="55" step="5">
                                </div>

                                <div class="range-container">
                                    <div class="range-header">
                                        <span class="range-label">HYPE Price</span>
                                        <span class="range-value" id="hypePriceValue">$35</span>
                                    </div>
                                    <input type="range" id="hypePrice" min="15" max="80" value="35" step="1">
                                </div>
                            </div>

                            <div class="pool-info" style="margin-top: 1rem;">
                                <div class="pool-item">
                                    <div class="pool-name">Unit Pool (filtered)</div>
                                    <div class="pool-vol">$30B</div>
                                </div>
                                <div class="pool-item">
                                    <div class="pool-name">Native Pool (filtered)</div>
                                    <div class="pool-vol">$15B</div>
                                </div>
                                <div class="pool-item">
                                    <div class="pool-name">Perps Pool (filtered)</div>
                                    <div class="pool-vol">$2.5T</div>
                                </div>
                                <div class="pool-item">
                                    <div class="pool-name">EVM Avg TVL</div>
                                    <div class="pool-vol">$2B</div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Results Section -->
                <div class="results-section">
                    <div class="card results-card">
                        <h2 class="card-title">
                            Estimated Allocation
                        </h2>

                        <div class="result-main">
                            <div class="result-label">Combined Value</div>
                            <div class="result-value" id="totalUSD">$0</div>
                            <div class="result-hype" id="totalHYPE">~0 HYPE</div>
                        </div>

                        <div class="breakdown-section">
                            <div class="breakdown-title">Breakdown by Category</div>
                            <div class="breakdown-item">
                                <div class="breakdown-cat">
                                    <span class="breakdown-dot unit"></span>
                                    Unit Spot
                                </div>
                                <div class="breakdown-value" id="unitResult">$0</div>
                            </div>
                            <div class="breakdown-item">
                                <div class="breakdown-cat">
                                    <span class="breakdown-dot native"></span>
                                    Native Spot
                                </div>
                                <div class="breakdown-value" id="nativeResult">$0</div>
                            </div>
                            <div class="breakdown-item">
                                <div class="breakdown-cat">
                                    <span class="breakdown-dot perps"></span>
                                    Perps
                                </div>
                                <div class="breakdown-value" id="perpsResult">$0</div>
                            </div>
                            <div class="breakdown-item">
                                <div class="breakdown-cat">
                                    <span class="breakdown-dot evm"></span>
                                    HyperEVM
                                </div>
                                <div class="breakdown-value" id="evmResult">$0</div>
                            </div>
                        </div>

                        <div class="stats-grid">
                            <div class="stat-item">
                                <div class="stat-label">Total HYPE</div>
                                <div class="stat-value green" id="statHype">0</div>
                            </div>
                            <div class="stat-item">
                                <div class="stat-label">Tier Multiplier</div>
                                <div class="stat-value blue" id="statTier">1.4x</div>
                            </div>
                            <div class="stat-item">
                                <div class="stat-label">Est. Fees Paid</div>
                                <div class="stat-value purple" id="statFees">$0</div>
                            </div>
                            <div class="stat-item">
                                <div class="stat-label">ROI</div>
                                <div class="stat-value yellow" id="statROI">0x</div>
                            </div>
                        </div>

                        <!-- CTA -->
                        <div class="results-cta">
                            <p>Don't have a Hyperliquid account yet? Start earning towards S3:</p>
                            <a href="https://app.hyperliquid.xyz/join/STRUBE" target="_blank">
                                Join Hyperliquid with Fee Discount →
                            </a>
                        </div>
                    </div>

                    <!-- Scenario Table -->
                    <div class="card scenario-card">
                        <h2 class="card-title">
                            Scenarios
                        </h2>
                        <table class="scenario-table">
                            <thead>
                                <tr>
                                    <th>Scenario</th>
                                    <th>S3</th>
                                    <th>Price</th>
                                    <th>Value</th>
                                </tr>
                            </thead>
                            <tbody id="scenarioBody">
                            </tbody>
                        </table>
                    </div>
                </div>
            </div>
        </div>

        <!-- Methodology Tab (now fully visible) -->
        <div class="tab-content" id="methodology-tab">
            <div class="methodology-page">
                <!-- Donation box at top -->
                <div class="donation-box">
                    <h3>Found this useful?</h3>
                    <p>This model took significant research to build. If it helped you, consider supporting future updates.</p>
                    <div class="wallet-box">
                        <div class="wallet-info">
                            <div class="wallet-label">USDC on Arbitrum / HyperEVM</div>
                            <div class="wallet-address" id="walletAddress">0x885145521348c8d15c6e07a3e0b2982c00839f38</div>
                        </div>
                        <button class="copy-btn" id="copyBtn" onclick="copyAddress()">Copy</button>
                    </div>
                </div>

                <div class="card">
                    <h2>Model Overview</h2>
                    <p>This calculator provides an independent estimate of potential Hyperliquid Season 3 (S3) airdrop allocations. The model is based on analysis of the Genesis airdrop precedent, current platform metrics, game theory, and incentive design principles.</p>
                    
                    <div class="warning-box">
                        <p><strong>Important:</strong> This is a speculative model. Actual S3 mechanics are unknown and may differ significantly from these estimates. This is not financial advice.</p>
                    </div>

                    <h3>Core Formula</h3>
                    <div class="formula-box">
Your HYPE = S3 Total × Category % × Sub-Pool % × (Your Volume / Pool Volume) × Tier Multiplier × Category Premium × Infrastructure Bonus
                    </div>
                </div>

                <div class="card">
                    <h2>HYPE Tokenomics</h2>
                    <p>Understanding the token distribution is critical for estimating S3 size.</p>
                    
                    <table class="data-table">
                        <thead>
                            <tr>
                                <th>Allocation</th>
                                <th>Amount</th>
                                <th>% of Supply</th>
                                <th>Status</th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr>
                                <td>Future Emissions & Community</td>
                                <td>388,880,000 HYPE</td>
                                <td>38.888%</td>
                                <td>Available for S3+</td>
                            </tr>
                            <tr>
                                <td>Genesis Distribution</td>
                                <td>310,000,000 HYPE</td>
                                <td>31.0%</td>
                                <td>Distributed Nov 29, 2024</td>
                            </tr>
                            <tr>
                                <td>Core Contributors</td>
                                <td>238,000,000 HYPE</td>
                                <td>23.8%</td>
                                <td>Locked until Nov 2025, then 24mo vest</td>
                            </tr>
                            <tr>
                                <td>Hyper Foundation</td>
                                <td>60,000,000 HYPE</td>
                                <td>6.0%</td>
                                <td>Foundation treasury</td>
                            </tr>
                            <tr>
                                <td>Community Grants</td>
                                <td>3,000,000 HYPE</td>
                                <td>0.3%</td>
                                <td>Ongoing</td>
                            </tr>
                        </tbody>
                    </table>

                    <div class="highlight-box">
                        <p><strong>Key Insight:</strong> With 388.88M HYPE available for community emissions, Hyperliquid has substantial runway for S3 and future seasons. At 7% for S3, they would still retain ~32% for S4, S5, etc.</p>
                    </div>
                </div>

                <div class="card">
                    <h2>S3 Size Estimation</h2>
                    <p>We estimate S3 will be 5-9% of total supply, with 7% as the base case.</p>

                    <h3>Reasoning</h3>
                    <ul>
                        <li><strong>Competitive positioning:</strong> Jupiter S2 was ~$700M, dYdX genesis was ~$500M. Hyperliquid needs to remain competitive.</li>
                        <li><strong>Team unlock timing:</strong> Nov 2025 team unlock creates sell pressure. A meaningful S3 can offset this narrative.</li>
                        <li><strong>Dynamic sizing:</strong> Hyperliquid likely targets a notional USD value (~$2-3B) rather than fixed token amount.</li>
                    </ul>

                    <h3>Dynamic Pricing Model</h3>
                    <table class="data-table">
                        <thead>
                            <tr>
                                <th>HYPE Price</th>
                                <th>Target Notional</th>
                                <th>Implied S3 %</th>
                                <th>HYPE Amount</th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr><td>$20</td><td>$2.5B</td><td>12.5%</td><td>125M</td></tr>
                            <tr><td>$25</td><td>$2.5B</td><td>10%</td><td>100M</td></tr>
                            <tr><td>$30</td><td>$2.5B</td><td>8.3%</td><td>83M</td></tr>
                            <tr><td>$35</td><td>$2.5B</td><td>7.1%</td><td>71M</td></tr>
                            <tr><td>$50</td><td>$2.5B</td><td>5%</td><td>50M</td></tr>
                        </tbody>
                    </table>
                </div>

                <div class="card">
                    <h2>Category Breakdown</h2>
                    <p>S3 allocations will likely be split across multiple activity categories.</p>

                    <table class="data-table">
                        <thead>
                            <tr>
                                <th>Category</th>
                                <th>% of S3</th>
                                <th>Rationale</th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr>
                                <td>Perps Trading</td>
                                <td>45-50%</td>
                                <td>Core revenue driver, largest user base</td>
                            </tr>
                            <tr>
                                <td>Spot Trading (Total)</td>
                                <td>15-18%</td>
                                <td>Strategic priority, infrastructure for HIP-3</td>
                            </tr>
                            <tr>
                                <td>→ Unit Spot</td>
                                <td>55% of spot</td>
                                <td>Cross-chain infrastructure, collateral backbone</td>
                            </tr>
                            <tr>
                                <td>→ Native Spot</td>
                                <td>45% of spot</td>
                                <td>HYPE/PURR ecosystem engagement</td>
                            </tr>
                            <tr>
                                <td>HyperEVM Activity</td>
                                <td>12-15%</td>
                                <td>Future growth vector, ecosystem expansion</td>
                            </tr>
                            <tr>
                                <td>Staking/Loyalty</td>
                                <td>8-10%</td>
                                <td>Decentralization, long-term holders</td>
                            </tr>
                            <tr>
                                <td>HIP-3 Deployers</td>
                                <td>5-8%</td>
                                <td>Bootstrap permissionless markets</td>
                            </tr>
                            <tr>
                                <td>HLP Providers</td>
                                <td>4-6%</td>
                                <td>Core liquidity infrastructure</td>
                            </tr>
                        </tbody>
                    </table>

                    <h3>Why Spot Gets 15-18% (vs ~5% of Revenue)</h3>
                    <p>While spot trading generates only 5-10% of platform revenue, there are strategic reasons to over-index:</p>
                    <ul>
                        <li><strong>Infrastructure dependency:</strong> HIP-3 requires deep spot for hedging and settlement</li>
                        <li><strong>Collateral integrity:</strong> Thin spot books = liquidation cascade risk</li>
                        <li><strong>Marginal utility:</strong> Additional spot liquidity has higher marginal value than additional perps liquidity</li>
                        <li><strong>Capital opportunity cost:</strong> Spot LPs lock real capital without leverage, requiring compensation</li>
                    </ul>
                </div>

                <div class="card">
                    <h2>Tier Multipliers</h2>
                    <p>Based on Genesis precedent, allocations are likely tiered by percentile ranking.</p>

                    <table class="data-table">
                        <thead>
                            <tr>
                                <th>Tier</th>
                                <th>Percentile</th>
                                <th>Multiplier</th>
                                <th>Description</th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr>
                                <td><strong>S</strong></td>
                                <td>Top 0.5%</td>
                                <td>1.75x</td>
                                <td>Institutional MMs, mega-whales</td>
                            </tr>
                            <tr>
                                <td><strong>A</strong></td>
                                <td>Top 2%</td>
                                <td>1.40x</td>
                                <td>High-volume consistent traders</td>
                            </tr>
                            <tr>
                                <td><strong>B</strong></td>
                                <td>Top 10%</td>
                                <td>1.15x</td>
                                <td>Active power users</td>
                            </tr>
                            <tr>
                                <td><strong>C</strong></td>
                                <td>Top 50%</td>
                                <td>1.00x</td>
                                <td>Regular users (baseline)</td>
                            </tr>
                            <tr>
                                <td><strong>D</strong></td>
                                <td>Bottom 50%</td>
                                <td>0.75x</td>
                                <td>Casual/minimal users</td>
                            </tr>
                        </tbody>
                    </table>
                </div>

                <div class="card">
                    <h2>Category Premiums & Bonuses (Speculative)</h2>
                    
                    <div class="warning-box">
                        <p><strong>Note:</strong> The following premiums are speculative extrapolations based on game theory, not confirmed by Hyperliquid. They may not exist at all. Use conservatively.</p>
                    </div>
                    
                    <h3>Unit Spot Premium: 1.0-1.5x (speculative)</h3>
                    <p>Unit spot volume <em>may</em> be weighted higher than native spot because:</p>
                    <ul>
                        <li>Enables cross-chain deposits (BTC, ETH, SOL without wrapping)</li>
                        <li>Critical for HIP-3 hedging and delta management</li>
                        <li>Backbone of unified-margin collateral system</li>
                        <li>Lower farming/wash trading rates than native spot</li>
                    </ul>
                    <p>However, there is no evidence this premium exists. Conservative estimates should use 1.0x.</p>

                    <h3>Infrastructure Bonus: 1.0-1.2x (speculative)</h3>
                    <p>May apply to critical infrastructure pairs like UETH/USDC, but again - this is not confirmed.</p>

                    <div class="formula-box">
Optimistic Combined: Tier (1.4x) × Unit Premium (1.5x) × Infra Bonus (1.2x) = 2.52x
Conservative Combined: Tier (1.25x) × No Premium (1.0x) × No Bonus (1.0x) = 1.25x
                    </div>
                </div>

                <div class="card">
                    <h2>Wash Trading Filters</h2>
                    <p>Hyperliquid will likely filter significant portions of volume as wash trading, based on Genesis precedent.</p>

                    <table class="data-table">
                        <thead>
                            <tr>
                                <th>Category</th>
                                <th>Estimated Filter Rate</th>
                                <th>Rationale</th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr>
                                <td>HYPE/USDC</td>
                                <td>50-70%</td>
                                <td>Highest farming target, easy to self-trade</td>
                            </tr>
                            <tr>
                                <td>Native Spot (other)</td>
                                <td>30-50%</td>
                                <td>Moderate farming, smaller token pairs</td>
                            </tr>
                            <tr>
                                <td>Unit Spot</td>
                                <td>10-20%</td>
                                <td>Requires real capital, higher barrier</td>
                            </tr>
                            <tr>
                                <td>Perps</td>
                                <td>15-25%</td>
                                <td>Some self-trading, but riskier to farm</td>
                            </tr>
                        </tbody>
                    </table>

                    <h3>Detection Methods (Likely)</h3>
                    <ul>
                        <li>Self-matching detection (same wallet both sides)</li>
                        <li>Circular trading patterns (A→B→C→A loops)</li>
                        <li>Abnormal maker/taker ratios</li>
                        <li>Fee-to-volume anomalies</li>
                        <li>Timing pattern analysis</li>
                        <li>Linked wallet clustering</li>
                    </ul>

                    <h3>Legitimacy Signals (What Helps You)</h3>
                    <ul>
                        <li>Real PNL variance (losses prove real counterparties)</li>
                        <li>Consistent activity over time (not flash farming)</li>
                        <li>High maker % with real spread capture</li>
                        <li>Trading on infrastructure-critical pairs</li>
                        <li>Reasonable spreads (not predatory)</li>
                    </ul>
                </div>

                <div class="card">
                    <h2>HyperEVM Allocation (High Uncertainty)</h2>
                    
                    <div class="warning-box">
                        <p><strong>Important:</strong> The HyperEVM allocation methodology is the most uncertain part of this model. Unlike trading volume (a flow), TVL is a stock (point-in-time). The approach below is speculative.</p>
                    </div>

                    <h3>Current Model Approach</h3>
                    <p>The calculator uses time-weighted average TVL as the metric, with your share = (Your Avg TVL / Total EVM TVL). This is a rough approximation.</p>

                    <h3>Alternative Approaches Hyperliquid Might Use</h3>
                    <ul>
                        <li><strong>Transaction count:</strong> Number of EVM transactions</li>
                        <li><strong>Gas consumed:</strong> Total gas used across transactions</li>
                        <li><strong>Protocol-specific:</strong> Activity in key dApps (KittenSwap, HyperLend, etc.)</li>
                        <li><strong>NFT/domain holding:</strong> Hypers, .hl domains, etc.</li>
                        <li><strong>Liquidity provision:</strong> LP positions across EVM DEXs</li>
                        <li><strong>Staking derivatives:</strong> kHYPE, stHYPE positions</li>
                    </ul>

                    <h3>Why This Matters</h3>
                    <p>If you're primarily an EVM user, your allocation estimate has much wider confidence intervals than spot/perps users. The 12-15% allocation to EVM is also speculative - it could be higher (if they want to bootstrap EVM) or lower (if they focus on core trading).</p>
                </div>

                <div class="card">
                    <h2>Pool Volume Estimates</h2>
                    <p>These are the estimated qualified volumes after wash trading filters.</p>

                    <div class="info-grid">
                        <div class="info-card">
                            <div class="info-card-label">Unit Spot Pool</div>
                            <div class="info-card-value">$30B</div>
                            <div class="info-card-note">~$34B raw, 10-15% filtered</div>
                        </div>
                        <div class="info-card">
                            <div class="info-card-label">Native Spot Pool</div>
                            <div class="info-card-value">$15B</div>
                            <div class="info-card-note">~$30-50B raw, 50-70% filtered</div>
                        </div>
                        <div class="info-card">
                            <div class="info-card-label">Perps Pool</div>
                            <div class="info-card-value">$2.5T</div>
                            <div class="info-card-note">~$3.3T raw, 20% filtered</div>
                        </div>
                        <div class="info-card">
                            <div class="info-card-label">HyperEVM TVL</div>
                            <div class="info-card-value">$2B</div>
                            <div class="info-card-note">Time-weighted average</div>
                        </div>
                    </div>
                </div>

                <div class="card">
                    <h2>S3 Probability Assessment</h2>
                    
                    <h3>Will S3 Happen?</h3>
                    <p><strong>Estimated probability: 70-80% by Q1 2026</strong></p>

                    <h3>Timing Estimate</h3>
                    <table class="data-table">
                        <thead>
                            <tr>
                                <th>Timing</th>
                                <th>Probability</th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr><td>Q4 2025 snapshot, Q1 2026 claim</td><td>50%</td></tr>
                            <tr><td>Q1 2026 snapshot, Q2 2026 claim</td><td>25%</td></tr>
                            <tr><td>Delayed to H2 2026</td><td>20%</td></tr>
                            <tr><td>Restructured (continuous emissions)</td><td>5%</td></tr>
                        </tbody>
                    </table>
                </div>

                <div class="card">
                    <h2>Key Uncertainties</h2>
                    <table class="data-table">
                        <thead>
                            <tr>
                                <th>Factor</th>
                                <th>Impact</th>
                                <th>Uncertainty</th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr>
                                <td>S3 total size</td>
                                <td>Very High</td>
                                <td>Could be 4-12% of supply</td>
                            </tr>
                            <tr>
                                <td>Spot allocation %</td>
                                <td>High</td>
                                <td>Could be 10-25% of S3</td>
                            </tr>
                            <tr>
                                <td>Unit premium existence</td>
                                <td>High</td>
                                <td>Speculative - may be 1.0-2.0x or not exist</td>
                            </tr>
                            <tr>
                                <td>Wash trading filter rates</td>
                                <td>Medium</td>
                                <td>Methodology unknown</td>
                            </tr>
                            <tr>
                                <td>EVM allocation methodology</td>
                                <td>High</td>
                                <td>TVL vs transactions vs other metrics</td>
                            </tr>
                            <tr>
                                <td>Tier multiplier magnitude</td>
                                <td>Medium</td>
                                <td>Could be flatter or steeper than modeled</td>
                            </tr>
                        </tbody>
                    </table>

                    <div class="warning-box">
                        <p><strong>Confidence Range:</strong> For any individual estimate, the actual outcome could realistically be 0.3x to 3x the calculated value.</p>
                    </div>
                </div>

                <div class="card">
                    <h2>Data Sources</h2>
                    <ul>
                        <li><a href="https://unit.hyperdash.info" target="_blank" style="color: var(--accent-green);">unit.hyperdash.info</a> - Unit spot volume tracking</li>
                        <li><a href="https://app.artemis.xyz" target="_blank" style="color: var(--accent-green);">Artemis</a> - Cross-platform volume comparison</li>
                        <li><a href="https://stats.hyperliquid.xyz" target="_blank" style="color: var(--accent-green);">Hyperliquid Stats</a> - Official platform metrics</li>
                    </ul>
                </div>

                <div class="card">
                    <h2>About This Model</h2>
                    <p>This calculator was developed by <a href="https://twitter.com/0xStrube" target="_blank" style="color: var(--accent-green);">@0xStrube</a> through independent analysis of Genesis airdrop patterns, platform metrics, tokenomics, competitive landscape, and game theory principles.</p>
                    <p><strong>Not affiliated with Hyperliquid.</strong> This is an independent community tool for educational purposes.</p>
                    <p>Last updated: November 2025</p>
                    <p style="margin-top: 1rem;">Questions or feedback? DM <a href="https://twitter.com/0xStrube" target="_blank" style="color: var(--accent-green);">@0xStrube</a> on Twitter/X.</p>
                </div>

                <!-- Donation box at bottom -->
                <div class="donation-box">
                    <h3>Support This Project</h3>
                    <p>If this model helped inform your strategy, consider a donation to support continued research and updates.</p>
                    <div class="wallet-box">
                        <div class="wallet-info">
                            <div class="wallet-label">USDC on Arbitrum / HyperEVM</div>
                            <div class="wallet-address">0x885145521348c8d15c6e07a3e0b2982c00839f38</div>
                        </div>
                        <button class="copy-btn" onclick="copyAddress()">Copy</button>
                    </div>
                </div>
            </div>
        </div>

        <footer>
            <p>Built by <a href="https://twitter.com/0xStrube" target="_blank">@0xStrube</a> • Independent model based on Genesis precedent, platform data, and game theory analysis.</p>
            <p style="margin-top: 0.5rem;">
                <a href="https://app.hyperliquid.xyz/join/STRUBE" target="_blank">Join Hyperliquid</a> • 
                Not affiliated with Hyperliquid • Educational purposes only
            </p>
        </footer>
    </div>

    <script>
        // Constants
        const TOTAL_SUPPLY = 1_000_000_000;
        const TIER_MULTIPLIERS = { 'S': 1.75, 'A': 1.40, 'B': 1.15, 'C': 1.00 };
        const POOL_VOLUMES = { unit: 30e9, native: 15e9, perps: 2.5e12, evm: 2e9 };
        const FEE_RATES = { unit: 0.001, native: 0.001, perps: 0.00035, evm: 0 };
        const SCENARIOS = [
            { name: 'Ultra Bear', tag: 'bear', s3: 10, price: 20 },
            { name: 'Bear', tag: 'bear', s3: 8, price: 25 },
            { name: 'Base', tag: 'base', s3: 7, price: 35, highlight: true },
            { name: 'Bull', tag: 'bull', s3: 6, price: 50 },
            { name: 'Ultra Bull', tag: 'bull', s3: 5, price: 60 }
        ];

        // State - note infraBonus defaults to false now (more conservative)
        let state = {
            unitVolume: 0, nativeVolume: 0, perpsVolume: 0, evmTVL: 0,
            tier: 'A', infraBonus: false, s3Size: 7, spotAlloc: 16, unitShare: 55, hypePrice: 35
        };

        const $ = id => document.getElementById(id);

        // Copy wallet address
        function copyAddress() {
            const address = '0x885145521348c8d15c6e07a3e0b2982c00839f38';
            navigator.clipboard.writeText(address).then(() => {
                document.querySelectorAll('.copy-btn').forEach(btn => {
                    btn.textContent = 'Copied!';
                    btn.classList.add('copied');
                    setTimeout(() => {
                        btn.textContent = 'Copy';
                        btn.classList.remove('copied');
                    }, 2000);
                });
            });
        }

        // Utility
        function formatUSD(num) {
            if (num >= 1e6) return '$' + (num / 1e6).toFixed(2) + 'M';
            if (num >= 1e3) return '$' + (num / 1e3).toFixed(0) + 'K';
            return '$' + num.toFixed(0);
        }

        function formatHYPE(num) {
            if (num >= 1e6) return (num / 1e6).toFixed(2) + 'M';
            if (num >= 1e3) return num.toLocaleString('en-US', { maximumFractionDigits: 0 });
            return num.toFixed(0);
        }

        // Calculations
        function calculateCategory(category, volume, params) {
            if (volume <= 0) return { hype: 0, usd: 0, fees: 0 };
            const s3Total = TOTAL_SUPPLY * (params.s3Size / 100);
            const tierMult = TIER_MULTIPLIERS[params.tier];
            let categoryPool, premium = 1, infraMult = 1;

            if (category === 'unit') {
                categoryPool = s3Total * (params.spotAlloc / 100) * (params.unitShare / 100);
                // More conservative: only apply 1.25x unit premium instead of 1.5x
                premium = 1.25;
                if (params.infraBonus) infraMult = 1.15; // Reduced from 1.2x
            } else if (category === 'native') {
                categoryPool = s3Total * (params.spotAlloc / 100) * ((100 - params.unitShare) / 100);
            } else if (category === 'perps') {
                categoryPool = s3Total * 0.48;
            } else {
                // EVM: 14% of S3, using TVL-based share
                // Note: This is highly speculative - TVL isn't a perfect metric
                categoryPool = s3Total * 0.14;
            }

            const share = volume / POOL_VOLUMES[category];
            const hype = categoryPool * share * tierMult * premium * infraMult;
            return { hype, usd: hype * params.hypePrice, fees: volume * FEE_RATES[category] };
        }

        function calculateAll(params) {
            const unit = calculateCategory('unit', params.unitVolume, params);
            const native = calculateCategory('native', params.nativeVolume, params);
            const perps = calculateCategory('perps', params.perpsVolume, params);
            const evm = calculateCategory('evm', params.evmTVL, params);
            const totalHype = unit.hype + native.hype + perps.hype + evm.hype;
            const totalUsd = unit.usd + native.usd + perps.usd + evm.usd;
            const totalFees = unit.fees + native.fees + perps.fees + evm.fees;
            return { unit, native, perps, evm, totalHype, totalUsd, totalFees, roi: totalFees > 0 ? totalUsd / totalFees : 0 };
        }

        function updateResults() {
            const r = calculateAll(state);
            $('totalUSD').textContent = formatUSD(r.totalUsd);
            $('totalHYPE').textContent = '~' + formatHYPE(r.totalHype) + ' HYPE';
            $('unitResult').textContent = formatUSD(r.unit.usd);
            $('nativeResult').textContent = formatUSD(r.native.usd);
            $('perpsResult').textContent = formatUSD(r.perps.usd);
            $('evmResult').textContent = formatUSD(r.evm.usd);
            ['unitResult', 'nativeResult', 'perpsResult', 'evmResult'].forEach(id => {
                $(id).classList.toggle('zero', parseFloat($(id).textContent.replace(/[$,KM]/g, '')) === 0);
            });
            $('statHype').textContent = formatHYPE(r.totalHype);
            $('statTier').textContent = TIER_MULTIPLIERS[state.tier] + 'x';
            $('statFees').textContent = formatUSD(r.totalFees);
            $('statROI').textContent = r.roi > 0 ? '~' + Math.round(r.roi) + 'x' : '-';
            ['unitSpotCard', 'nativeSpotCard', 'perpsCard', 'evmCard'].forEach((id, i) => {
                const vals = [state.unitVolume, state.nativeVolume, state.perpsVolume, state.evmTVL];
                $(id).classList.toggle('has-value', vals[i] > 0);
            });
            updateScenarios();
        }

        function updateScenarios() {
            $('scenarioBody').innerHTML = SCENARIOS.map(s => {
                const r = calculateAll({ ...state, s3Size: s.s3, hypePrice: s.price });
                return `<tr class="${s.highlight ? 'highlight' : ''}">
                    <td><span class="tag ${s.tag}">${s.name}</span></td>
                    <td>${s.s3}%</td><td>$${s.price}</td><td>${formatUSD(r.totalUsd)}</td></tr>`;
            }).join('');
        }

        function init() {
            // Tab navigation
            document.querySelectorAll('.nav-tab').forEach(tab => {
                tab.addEventListener('click', () => {
                    document.querySelectorAll('.nav-tab').forEach(t => t.classList.remove('active'));
                    document.querySelectorAll('.tab-content').forEach(c => c.classList.remove('active'));
                    tab.classList.add('active');
                    $(tab.dataset.tab + '-tab').classList.add('active');
                });
            });

            // Inputs
            ['unitVolume', 'nativeVolume', 'perpsVolume', 'evmTVL'].forEach(id => {
                $(id).addEventListener('input', e => { state[id] = parseFloat(e.target.value) || 0; updateResults(); });
            });

            // Tier
            $('tierToggle').querySelectorAll('.toggle-btn').forEach(btn => {
                btn.addEventListener('click', () => {
                    $('tierToggle').querySelectorAll('.toggle-btn').forEach(b => b.classList.remove('active'));
                    btn.classList.add('active');
                    state.tier = btn.dataset.value;
                    updateResults();
                });
            });

            // Checkbox
            $('infraBonus').addEventListener('change', e => { state.infraBonus = e.target.checked; updateResults(); });

            // Ranges
            [['s3Size', '%'], ['spotAlloc', '%'], ['unitShare', '%'], ['hypePrice', '$']].forEach(([id, sfx]) => {
                $(id).addEventListener('input', e => {
                    state[id] = parseFloat(e.target.value);
                    $(id + 'Value').textContent = (sfx === '$' ? '$' : '') + e.target.value + (sfx === '%' ? '%' : '');
                    updateResults();
                });
            });

            // Collapsible
            $('paramsHeader').addEventListener('click', () => {
                $('paramsHeader').classList.toggle('open');
                $('paramsContent').classList.toggle('open');
            });

            updateResults();
        }

        init();
    </script>
</body>
</html>
